!function(){"use strict";var e,t={620:function(e,t,i){i.d(t,{y:function(){return r}});var s=i(5602),l=i(5762),a=i.n(l),n=i(7287);function r(e){return s.createElement("div",{className:(void 0===e.className||null===e.className?"":e.className+" ")+"media-list-wrapper",style:e.style},s.createElement(n.F,{title:e.title,viewAllLink:e.viewAllLink,viewAllText:e.viewAllText},e.children||null))}r.propTypes={style:a().object,className:a().string}},2194:function(e,t,i){i.d(t,{i:function(){return n}});var s=i(5602),l=i(5762),a=i.n(l);function n(e){return s.createElement(s.Fragment,null,s.createElement("div",{className:(void 0===e.className||null===e.className?"":e.className+" ")+"hw-category",style:e.style},s.createElement("h2",{className:"hw-category-title"},e.title),void 0===e.viewAllLink||null===e.viewAllLink?null:s.createElement("a",{href:e.viewAllLink,title:e.viewAllText||e.viewAllLink,className:"hw-category-link"},e.viewAllText||e.viewAllLink)),e.desc&&s.createElement("div",{className:"hw-category-description"},e.desc))}n.propTypes={style:a().object,className:a().string,title:a().string.isRequired,viewAllLink:a().string,viewAllText:a().string},n.defaultProps={viewAllText:"VIEW ALL"}},4443:function(e,t,i){i.d(t,{ZV:function(){return n.A},ey:function(){return a.A},gj:function(){return r.A},iq:function(){return s.A},m5:function(){return o.A},zi:function(){return l.A}});var s=i(9702),l=i(7449),a=i(4340),n=i(6925),r=i(9804),o=(i(797),i(7974),i(8959),i(5252))},5444:function(e,t,i){var s=i(655),l=i(5602),a=i(8282),n=i(1653),r=i(863),o=i(8197),c=i(620),u=(i(2194),i(3926)),d=i(1756);function m(e){const t=(0,l.useRef)(null),[i,s]=(0,l.useState)(e),[a,n,r]=(0,d.O)();return[t,i,s,a,n,r]}var h=i(3705),f=i(623);function p(e){return l.createElement("div",{className:"media-filter-option"},l.createElement("button",{className:e.selected?"active":"",onClick:function(){e.onSelect(e.id)}},e.label))}function g(e){const[t,i]=(0,l.useState)(e.default);function s(t){i(t),"function"==typeof e.onSelect&&e.onSelect(t)}return l.createElement("div",{className:"media-filter-option-list"},function(t){const i=[];let a=0;for(;a<e.items.length;)e.hideOptionOnSelect?e.items[a].id!==t&&i.push(l.createElement(p,{key:e.items[a].id,id:e.items[a].id,label:e.items[a].label,selected:e.items[a].id===t,onSelect:s})):i.push(l.createElement(p,{key:e.items[a].id,id:e.items[a].id,label:e.items[a].label,selected:e.items[a].id===t,onSelect:s})),a+=1;return i}(t))}function v(e){const[t,i,s,a,n,r]=m(e.default),[o,c]=(0,l.useState)(e.label);return(0,l.useEffect)((()=>{if(a.current.tryToHide(),e.updateTriggerButtonOnChange){let t=0;for(;t<e.options.length;){if(i===e.options[t].id){c(e.options[t].label);break}t+=1}}"function"==typeof e.onSelect&&e.onSelect(i)}),[i]),l.createElement("div",{ref:t,className:"media-filter"},l.createElement(r,{contentRef:a},l.createElement("button",{className:"popup-trigger","aria-label":"Filter"},l.createElement("span",{className:"filter-button-label"},l.createElement("span",{className:"filter-button-label-text"},o),l.createElement(f.Z,{type:"arrow_drop_down"})))),l.createElement(n,{contentRef:a},l.createElement("div",{className:"main-options"},l.createElement(h.AP,null,l.createElement(g,{items:e.options,default:i,onSelect:s,hideOptionOnSelect:e.hideOptionOnSelect})))))}function y(e){const[t,i,s,a,n,r]=m(e.default);return(0,l.useEffect)((()=>{a.current.tryToHide(),"function"==typeof e.onSelect&&e.onSelect(i)}),[i]),l.createElement("div",{ref:t,className:"media-filter"},l.createElement(r,{contentRef:a},l.createElement("button",{className:"popup-trigger","aria-label":"Filter"},l.createElement(f.Z,{type:"sort"}),l.createElement("span",{className:"filter-button-label"},l.createElement("span",{className:"filter-button-label-text"},e.label)))),l.createElement(n,{contentRef:a},l.createElement("div",{className:"main-options"},l.createElement(h.AP,null,l.createElement(g,{items:e.options,default:i,onSelect:s})))))}const b=[{id:"all",label:"All media types"},{id:"video",label:"Video"},{id:"audio",label:"Audio"},{id:"image",label:"Images"},{id:"pdf",label:"Pdf"}],_=[{id:"date_added_desc",label:"Upload date (newest)"},{id:"date_added_asc",label:"Upload date (oldest)"},{id:"most_views",label:"View count"},{id:"most_likes",label:"Like count"}];function E(e){const[t,i]=(0,l.useState)("all"),[s,a]=(0,l.useState)("date_added_desc"),[n,r]=(0,l.useState)({sort_by:null,ordering:null,media_type:null});function o(){const e={...n,media_type:null,sort_by:null,ordering:null};switch(t){case"video":e.media_type="video";break;case"audio":e.media_type="audio";break;case"image":e.media_type="image";break;case"pdf":e.media_type="pdf"}switch(s){case"most_views":e.sort_by="views",e.ordering=null;break;case"most_likes":e.sort_by="likes",e.ordering=null;break;case"date_added_asc":e.sort_by=null,e.ordering="asc"}r(e)}return(0,l.useEffect)((()=>{o()}),[t,s]),(0,l.useEffect)((()=>{"function"==typeof e.onFiltersUpdate&&e.onFiltersUpdate(n)}),[n]),(0,l.useEffect)((()=>{o()}),[]),l.createElement("div",{className:"media-filters-row"},l.createElement("div",{className:"media-filters-row-inner"},l.createElement("div",{className:"media-type-filters"},l.createElement(v,{label:b[0].label,default:b[0].id,options:b,onSelect:function(e){i(e)},updateTriggerButtonOnChange:!0,hideOptionOnSelect:!0})),l.createElement("div",{className:"media-filters-sort"},l.createElement(y,{label:"SORT BY",default:_[0].id,options:_,onSelect:function(e){a(e)},updateTriggerButtonOnChange:!1,hideOptionOnSelect:!1}))))}var A=i(5762),w=i.n(A);function N(e){return e.options.map((t=>l.createElement("div",{key:t.id,className:t.id===e.selected?"active":""},l.createElement("button",{onClick:e.onSelect,filter:e.id,value:t.id},l.createElement("span",null,t.title),t.id===e.selected?l.createElement(f.Z,{type:"close"}):null))))}N.propTypes={id:w().string.isRequired,selected:w().string.isRequired,onSelect:w().func.isRequired};const C={media_type:[{id:"all",title:"All"},{id:"video",title:"Video"},{id:"audio",title:"Audio"},{id:"image",title:"Image"},{id:"pdf",title:"Pdf"}],upload_date:[{id:"all",title:"All"},{id:"today",title:"Today"},{id:"this_week",title:"This week"},{id:"this_month",title:"This month"},{id:"this_year",title:"This year"}],sort_by:[{id:"date_added_desc",title:"Upload date (newest)"},{id:"date_added_asc",title:"Upload date (oldest)"},{id:"most_views",title:"View count"},{id:"most_likes",title:"Like count"}],license:[{id:"all",title:"All"},{id:"5",title:"Attribution 4.0 International"},{id:"6",title:"Attribution-ShareAlike 4.0 International"},{id:"7",title:"Attribution-NoDerivatives 4.0 International"},{id:"8",title:"Attribution-NonCommercial 4.0 International"},{id:"9",title:"Attribution-NonCommercial-ShareAlike 4.0 International"},{id:"10",title:"Attribution-NonCommercial-NoDerivatives 4.0 International"},{id:"no_license",title:"No license"}]};function T(e){const[t,i]=(0,l.useState)(e.hidden),[s,a]=(0,l.useState)("all"),[n,o]=(0,l.useState)("all"),[c,u]=(0,l.useState)("date_added_desc"),[d,m]=(0,l.useState)("all"),h=(0,l.useRef)(null),f=(0,l.useRef)(null);function p(){t||(h.current.style.height=24+f.current.offsetHeight+"px")}function g(t){const i={media_type:s,upload_date:n,license:d,sort_by:c};switch(t.currentTarget.getAttribute("filter")){case"media_type":i.media_type=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(i),a(i.media_type);break;case"upload_date":i.upload_date=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(i),o(i.upload_date);break;case"license":i.license=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(i),m(i.license);break;case"sort_by":i.sort_by=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(i),u(i.sort_by)}}return(0,l.useEffect)((()=>{i(e.hidden),p()}),[e.hidden]),(0,l.useEffect)((()=>(r.A.on("window_resize",p),()=>r.A.removeListener("window_resize",p))),[]),l.createElement("div",{ref:h,className:"mi-filters-row"+(t?" hidden":"")},l.createElement("div",{ref:f,className:"mi-filters-row-inner"},l.createElement("div",{className:"mi-filter"},l.createElement("div",{className:"mi-filter-title"},"MEDIA TYPE"),l.createElement("div",{className:"mi-filter-options"},l.createElement(N,{id:"media_type",options:C.media_type,selected:s,onSelect:g}))),l.createElement("div",{className:"mi-filter"},l.createElement("div",{className:"mi-filter-title"},"UPLOAD DATE"),l.createElement("div",{className:"mi-filter-options"},l.createElement(N,{id:"upload_date",options:C.upload_date,selected:n,onSelect:g}))),l.createElement("div",{className:"mi-filter"},l.createElement("div",{className:"mi-filter-title"},"SORT BY"),l.createElement("div",{className:"mi-filter-options"},l.createElement(N,{id:"sort_by",options:C.sort_by,selected:c,onSelect:g}))),r.A.get("config-options").pages.search.enabledLicenses?l.createElement("div",{className:"mi-filter mi-filter-license"},l.createElement("div",{className:"mi-filter-title"},"LICENSE"),l.createElement("div",{className:"mi-filter-options"},l.createElement(N,{id:"license",options:C.license,selected:d,onSelect:g}))):null))}function k(e){const[t,i]=(0,l.useState)(e.active);return l.createElement("div",{className:"mi-filters-toggle"},l.createElement("button",{className:t?"active":"","aria-label":"Filter",onClick:function(){i(!t),void 0!==e.onClick&&e.onClick()}},l.createElement(f.Z,{type:"filter_list"}),l.createElement("span",{className:"filter-button-label"},l.createElement("span",{className:"filter-button-label-text"},"FILTERS"))))}T.propTypes={hidden:w().bool},T.defaultProps={hidden:!1},k.propTypes={onClick:w().func,active:w().bool},k.defaultProps={active:!1};class S extends n.Y{constructor(e){super(e,"search-results"),this.state={validQuery:!1,requestUrl:null,filterArgs:"",resultsTitle:null,resultsCount:null,searchQuery:o.A.get("search-query"),searchCategories:o.A.get("search-categories"),searchTags:o.A.get("search-tags"),searchCountries:o.A.get("search-countries"),searchLanguages:o.A.get("search-languages"),searchTopics:o.A.get("search-topics"),hiddenFilters:!0},this.getCountFunc=this.getCountFunc.bind(this),this.updateRequestUrl=this.updateRequestUrl.bind(this),this.onFilterArgsUpdate=this.onFilterArgsUpdate.bind(this),this.onToggleFiltersClick=this.onToggleFiltersClick.bind(this),this.onFiltersUpdate=this.onFiltersUpdate.bind(this),this.didMount=!1,this.updateRequestUrl()}componentDidMount(){this.didMount=!0}onToggleFiltersClick(){this.setState({hiddenFilters:!this.state.hiddenFilters})}onFiltersUpdate(e){const t={media_type:null,upload_date:null,license:null,sort_by:null,ordering:null};switch(e.media_type){case"video":case"audio":case"image":case"pdf":t.media_type=e.media_type}switch(e.upload_date){case"today":case"this_week":case"this_month":case"this_year":t.upload_date=e.upload_date}switch(e.license){case"5":case"6":case"7":case"8":case"9":case"10":case"no_license":t.license=e.license}switch(e.sort_by){case"most_views":t.sort_by="views";break;case"most_likes":t.sort_by="likes";break;case"date_added_asc":t.ordering="asc"}const i=[];for(let e in t)null!==t[e]&&i.push(e+"="+t[e]);this.setState({filterArgs:i.length?"&"+i.join("&"):""},(function(){this.updateRequestUrl()}))}updateRequestUrl(){const e=this.state.searchQuery||this.state.searchCategories||this.state.searchTags||this.state.searchCountries||this.state.searchLanguages||this.state.searchTopics;let t=null;null!==this.state.resultsCount&&(e?this.state.searchCategories?(t=null===this.state.resultsCount||0===this.state.resultsCount?"No":this.state.resultsCount,t+=' media in category "'+this.state.searchCategories+'"'):this.state.searchTags?(t=null===this.state.resultsCount||0===this.state.resultsCount?"No":this.state.resultsCount,t+=' media in tag "'+this.state.searchTags+'"'):this.state.searchTopics?(t=null===this.state.resultsCount||0===this.state.resultsCount?"No":this.state.resultsCount,t+=' media in topic "'+this.state.searchTopics+'"'):this.state.searchCountries?(t=null===this.state.resultsCount||0===this.state.resultsCount?"No":this.state.resultsCount,t+=' media in country "'+this.state.searchCountries+'"'):this.state.searchLanguages?(t=null===this.state.resultsCount||0===this.state.resultsCount?"No":this.state.resultsCount,t+=' media in language "'+this.state.searchLanguages+'"'):t=null===this.state.resultsCount||0===this.state.resultsCount?'No results for "'+this.state.searchQuery+'"':this.state.resultsCount+" result"+(1<this.state.resultsCount?"s":"")+' for "'+this.state.searchQuery+'"':t='No results for "'+this.state.searchQuery+'"');const i=(this.state.searchQuery||"")+(this.state.searchTags?"&t="+this.state.searchTags:"")+(this.state.searchCategories?"&c="+this.state.searchCategories:"")+(this.state.searchTopics?"&topic="+this.state.searchTopics:"")+(this.state.searchLanguages?"&language="+this.state.searchLanguages:"")+(this.state.searchCountries?"&country="+this.state.searchCountries:""),s=a.A._currentValue.search.query+i+this.state.filterArgs;this.didMount?this.setState({validQuery:e,requestUrl:s,resultsTitle:t}):(this.state.validQuery=e,this.state.requestUrl=s,this.state.resultsTitle=t)}onFilterArgsUpdate(e){const t=[];for(let i in e)null!==e[i]&&t.push(i+"="+e[i]);this.setState({filterArgs:t.length?"&"+t.join("&"):""},(function(){this.updateRequestUrl()}))}getCountFunc(e){this.setState({resultsCount:e},(function(){this.updateRequestUrl()}))}pageContent(){const e=r.A.get("config-options").pages.search.advancedFilters;return l.createElement(c.y,{className:"search-results-wrap items-list-hor",title:null===this.state.resultsTitle?null:this.state.resultsTitle},e?l.createElement(k,{onClick:this.onToggleFiltersClick}):null,e?l.createElement(T,{hidden:this.state.hiddenFilters,onFiltersUpdate:this.onFiltersUpdate}):null,e?null:l.createElement(E,{onFiltersUpdate:this.onFilterArgsUpdate}),this.state.validQuery?l.createElement(u.y,{key:this.state.requestUrl,singleLinkContent:!1,horizontalItemsOrientation:!0,itemsCountCallback:this.getCountFunc,requestUrl:this.state.requestUrl,preferSummary:!0,hideViews:!r.A.get("config-media-item").displayViews,hideAuthor:!r.A.get("config-media-item").displayAuthor,hideDate:!r.A.get("config-media-item").displayPublishDate}):null)}}(0,s.C)("page-search",S)},7287:function(e,t,i){i.d(t,{F:function(){return r}});var s=i(5602),l=i(5762),a=i.n(l),n=i(2194);function r(e){return s.createElement("div",{className:(void 0===e.className||null===e.className?"":e.className+" ")+"media-list-row",style:e.style},void 0===e.title||null===e.title?null:s.createElement(n.i,{title:e.title,viewAllLink:e.viewAllLink,viewAllText:e.viewAllText,desc:e.desc}),e.children||null)}r.propTypes={style:a().object,className:a().string,title:a().string,viewAllLink:a().string,viewAllText:a().string,children:a().node}},8282:function(e,t,i){var s=i(5602),l=i(5909);const a=s.createContext((0,l.$)(window.MediaCMS).api);a.Consumer,t.A=a}},i={};function s(e){var l=i[e];if(void 0!==l)return l.exports;var a=i[e]={exports:{}};return t[e].call(a.exports,a,a.exports,s),a.exports}s.m=t,e=[],s.O=function(t,i,l,a){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],l=e[u][1],a=e[u][2];for(var r=!0,o=0;o<i.length;o++)(!1&a||n>=a)&&Object.keys(s.O).every((function(e){return s.O[e](i[o])}))?i.splice(o--,1):(r=!1,a<n&&(n=a));if(r){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[i,l,a]},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=187,function(){var e={187:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,a,n=i[0],r=i[1],o=i[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(l in r)s.o(r,l)&&(s.m[l]=r[l]);if(o)var u=o(s)}for(t&&t(i);c<n.length;c++)a=n[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},i=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var l=s.O(void 0,[276],(function(){return s(5444)}));l=s.O(l)}();