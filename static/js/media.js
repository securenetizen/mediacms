!function(){var e,t={162:function(e,t,n){"use strict";var i=n(2667),a=(n(5101),n(6394),n(3080),n(2004),n(8407),n(8288),n(5677),n(2129),n(4655),n(5466)),r=(n(6116),n(9518)),o=n(3074),l=n.n(o),s=n(365),c=n(8648),u=n.n(c),d=n(2276),m=n(2787),f=n(4426),p=n(3811);function h(e){var t=null,n=e.split(".");if(n.length)switch(n=n[n.length-1]){case"webm":t="audio/webm";break;case"flac":t="audio/flac";break;case"wave":t="audio/wave";break;case"wav":t="audio/wav";break;case"ogg":case"ogg":t="audio/ogg";break;case"mp3":case"mpeg":t="audio/mpeg"}return t}n(2322),n(9268);var y=n(9688),v=n(5793),b=n(6983),g=n(9450);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function k(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}new g.Z;var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(i);if(r){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e);var n=d.Z.get("media-data");t.AudioPlayerData={},t.audioStartedPlaying=!1;var i=(0,y.U)(n.original_media_url,s.Z._currentValue.url);t.videoSources=[{src:i,type:h(i)}],t.videoPoster=n.poster_url,t.videoPoster=t.videoPoster?t.videoPoster:n.thumbnail_url,t.videoPoster=t.videoPoster?(0,y.U)(t.videoPoster,s.Z._currentValue.url):"",t.updatePlayerVolume=t.updatePlayerVolume.bind(S(t)),t.onAudioEnd=t.onAudioEnd.bind(S(t)),t.onAudioRestart=t.onAudioRestart.bind(S(t)),f.Z.on("switched_media_auto_play",t.onUpdateMediaAutoPlay.bind(S(t))),t.wrapperClick=t.wrapperClick.bind(S(t));var a=new g.Z;return a.update(d.Z.get("media-data").duration),t.durationISO8601=a.ISO8601(),t}return t=l,(n=[{key:"componentDidMount",value:function(){this.videoSources.length||console.warn("Audio DEBUG:","Audio file doesn't exist"),this.recommendedMedia=d.Z.get("media-data").related_media.length?new b.Z(d.Z.get("media-data").related_media,this.refs.AudioElem.parentNode,this.props.inEmbed):null,this.upNextLoaderView=!this.props.inEmbed&&d.Z.get("media-data").related_media.length?new v.Z(d.Z.get("media-data").related_media[0]):null,document.hasFocus()||"visible"===document.visibilityState?this.initPlayerInstance():(this.initPlayerInstance=this.initPlayerInstance.bind(this),window.addEventListener("focus",this.initPlayerInstance),document.addEventListener("visibilitychange",this.initPlayerInstance))}},{key:"componentWillUnmount",value:function(){this.recommendedMedia&&(this.AudioPlayerData.instance.player.off("fullscreenchange",this.recommendedMedia.onResize),f.Z.removeListener("window_resize",this.recommendedMedia.onResize),m.Z.removeListener("changed_viewer_mode",this.recommendedMedia.onResize),this.recommendedMedia.destroy()),videojs(this.refs.AudioElem).dispose(),this.AudioPlayerData.instance=null,delete this.AudioPlayerData.instance}},{key:"initPlayerInstance",value:function(){window.removeEventListener("focus",this.initPlayerInstance),document.removeEventListener("visibilitychange",this.initPlayerInstance),this.refs.AudioElem.focus(),this.initPlayerInstance=null,setTimeout(function(){if(!this.AudioPlayerData.instance){var e=this.props.inEmbed?document.createElement("a"):null,t=this.props.inEmbed?document.createElement("a"):null;e&&(e.setAttribute("class","title-link"),e.setAttribute("href",d.Z.get("media-data").url),e.setAttribute("title",d.Z.get("media-data").title),e.setAttribute("target","_blank"),e.innerHTML=d.Z.get("media-data").title),t&&(t.setAttribute("class","user-thumb-link"),t.setAttribute("href",d.Z.get("media-data").author_profile),t.setAttribute("title",d.Z.get("media-data").author_name),t.setAttribute("target","_blank"),t.innerHTML='<img src="'+d.Z.get("media-author-thumbnail-url")+'" alt="" />'),this.AudioPlayerData.instance=new(u())(this.refs.AudioElem,{sources:this.videoSources,poster:this.videoPoster,autoplay:!this.props.inEmbed,bigPlayButton:!0,controlBar:{fullscreen:!1,theaterMode:!1,next:!this.props.inEmbed&&0<d.Z.get("media-data").related_media.length},cornerLayers:{topLeft:e,topRight:this.upNextLoaderView?this.upNextLoaderView.html():null,bottomLeft:this.recommendedMedia?this.recommendedMedia.html():null,bottomRight:t}},{volume:m.Z.get("player-volume"),soundMuted:m.Z.get("player-sound-muted")},null,null,this.onAudioPlayerStateUpdate.bind(this),this.onClickNextButton.bind(this),null),this.upNextLoaderView&&(this.upNextLoaderView.setVideoJsPlayerElem(this.AudioPlayerData.instance.player.el_),this.onUpdateMediaAutoPlay()),this.refs.AudioElem.parentNode.focus(),this.AudioPlayerData.instance.player.one("play",function(){this.audioStartedPlaying=!0}.bind(this)),this.recommendedMedia&&(this.recommendedMedia.initWrappers(this.AudioPlayerData.instance.player.el_),this.AudioPlayerData.instance.player.one("pause",this.recommendedMedia.init),this.AudioPlayerData.instance.player.on("fullscreenchange",this.recommendedMedia.onResize),f.Z.on("window_resize",this.recommendedMedia.onResize),m.Z.on("changed_viewer_mode",this.recommendedMedia.onResize)),this.AudioPlayerData.instance.player.one("ended",this.onAudioEnd)}}.bind(this),50)}},{key:"initialDocumentFocus",value:function(){this.refs.AudioElem.parentNode&&(this.refs.AudioElem.parentNode.focus(),setTimeout(function(){this.AudioPlayerData.instance.player.play()}.bind(this),50)),window.removeEventListener("focus",this.initialDocumentFocus),this.initialDocumentFocus=null}},{key:"onClickNextButton",value:function(){this.props.inEmbed||(window.location.href=d.Z.get("media-data").related_media[0].url)}},{key:"onUpdateMediaAutoPlay",value:function(){this.upNextLoaderView&&(f.Z.get("media-auto-play")?this.upNextLoaderView.showTimerView(this.AudioPlayerData.instance.isEnded()):this.upNextLoaderView.hideTimerView())}},{key:"onAudioPlayerStateUpdate",value:function(e){this.updatePlayerVolume(e.volume,e.soundMuted)}},{key:"onAudioRestart",value:function(){this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("inline"),this.AudioPlayerData.instance.player.one("pause",this.recommendedMedia.init),this.AudioPlayerData.instance.player.one("ended",this.onAudioEnd))}},{key:"onAudioEnd",value:function(){if(this.recommendedMedia&&(this.recommendedMedia.updateDisplayType("full"),this.AudioPlayerData.instance.player.one("playing",this.onAudioRestart)),!this.props.inEmbed&&d.Z.get("playlist-id")){var e=document.querySelector(".video-player .more-media"),t=document.querySelector(".video-player .vjs-actions-anim");this.upNextLoaderView.cancelTimer();var n=d.Z.get("playlist-next-media-url");return n&&(e&&(e.style.display="none"),t&&(t.style.display="none"),window.location.href=n),void this.upNextLoaderView.hideTimerView()}this.upNextLoaderView&&(f.Z.get("media-auto-play")?(this.upNextLoaderView.startTimer(),this.AudioPlayerData.instance.player.one("play",function(){this.upNextLoaderView.cancelTimer()}.bind(this))):this.upNextLoaderView.cancelTimer())}},{key:"updatePlayerVolume",value:function(e,t){m.Z.get("player-volume")!==e&&p.zZ(e),m.Z.get("player-sound-muted")!==t&&p.Hs(t)}},{key:"wrapperClick",value:function(e){e.target.parentNode===this.refs.videoPlayerWrap&&(this.AudioPlayerData.instance.player.ended()||(!this.AudioPlayerData.instance.player.hasStarted_||this.AudioPlayerData.instance.player.paused()?this.AudioPlayerData.instance.player.play():this.AudioPlayerData.instance.player.pause()))}},{key:"render",value:function(){return a.createElement("div",{className:"player-container audio-player-container"},a.createElement("div",{className:"player-container-inner"},a.createElement("div",{className:"video-player",ref:"videoPlayerWrap",onClick:this.wrapperClick},a.createElement("audio",{tabIndex:"1",ref:"AudioElem",className:"video-js vjs-mediacms native-dimensions"}))))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function C(e){var t=(0,a.useContext)(s.Z),n=m();n=(n=n||d.Z.get("media-data").thumbnail_url)||"";var i,r,o=(i=(0,a.useState)(n),r=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(i,r)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(i,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],c=o[1];function u(){c(m())}function m(){var e=d.Z.get("media-data"),n="string"==typeof e.poster_url?e.poster_url.trim():"";return""===n&&(n="string"==typeof e.thumbnail_url?e.thumbnail_url.trim():""),""===n&&(n="string"==typeof d.Z.get("media-original-url")?d.Z.get("media-original-url").trim():""),""===n?"#":t.url+"/"+n.replace(/^\//g,"")}return(0,a.useEffect)((function(){return d.Z.on("loaded_image_data",u),function(){return d.Z.removeListener("loaded_image_data",u)}}),[]),l?a.createElement("div",{className:"viewer-image-container"},a.createElement("img",{src:l,alt:d.Z.get("media-data").title||null})):null}function R(){return a.createElement("div",{className:"player-container viewer-pdf-container"},a.createElement("div",{className:"player-container-inner"},a.createElement("span",null,a.createElement("span",null,a.createElement("i",{className:"material-icons"},"insert_drive_file")))))}function Z(){return a.createElement("div",{className:"player-container viewer-attachment-container"},a.createElement("div",{className:"player-container-inner"},a.createElement("span",null,a.createElement("span",null,a.createElement("i",{className:"material-icons"},"insert_drive_file")))))}O.defaultProps={inEmbed:!1},O.propTypes={inEmbed:l().bool},n(3233),n(3296),n(288),n(4458),n(3675);var I=n(5184),M=n(3699);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function D(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(i);if(r){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function l(){return T(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return a.createElement("div",{className:"viewer-container",key:"viewer-container-error"},a.createElement("div",{className:"player-container player-container-error"},a.createElement("div",{className:"player-container-inner"},a.createElement("div",{className:"error-container"},a.createElement("div",{className:"error-container-inner"},a.createElement("span",{className:"icon-wrap"},a.createElement("i",{className:"material-icons"},"error_outline")),a.createElement("span",{className:"msg-wrap"},d.Z.get("media-load-error-message")))))))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent),U=(n(9808),n(8736)),F=n(2880),B=n(8349),H=(n(2070),n(4067)),W=n(1589),q=n(2431),z=n(2331),$=n(8680),G=n(4564);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var K="comment",J="Comment",Q="SUBMIT";function ee(e){var t=(0,a.useRef)(null),n=Y((0,a.useState)(""),2),i=n[0],r=n[1],o=Y((0,a.useState)(!1),2),l=o[0],c=o[1],u=Y((0,a.useState)(!1),2),m=u[0],f=u[1],p=Y((0,a.useState)(-1),2),h=p[0],y=p[1],v=Y((0,a.useState)(F.Z._currentValue.is.anonymous?W.Z._currentValue.signin+"?next=/"+window.location.href.replace(s.Z._currentValue.url,"").replace(/^\//g,""):null),1)[0];function b(){t.current.style.height="";var e=t.current.scrollHeight,n=0<h?h:parseFloat(window.getComputedStyle(t.current).lineHeight);r(""),c(!1),y(n),t.current.style.height=Math.max(20,h*Math.ceil(e/n))+"px"}function g(){c(!1)}return(0,a.useEffect)((function(){return d.Z.on("comment_submit",b),d.Z.on("comment_submit_fail",g),function(){d.Z.removeListener("comment_submit",b),d.Z.removeListener("comment_submit_fail",g)}})),F.Z._currentValue.is.anonymous?a.createElement("div",{className:"comments-form"},a.createElement("div",{className:"comments-form-inner"},a.createElement($.q,null),a.createElement("div",{className:"form"},a.createElement("a",{href:v,rel:"noffolow",className:"form-textarea-wrap",title:"Add a comment..."},a.createElement("span",{className:"form-textarea"},"Add a comment...")),a.createElement("div",{className:"form-buttons"},a.createElement("a",{href:v,rel:"noffolow",className:"disabled"},Q))))):a.createElement("div",{className:"comments-form"},a.createElement("div",{className:"comments-form-inner"},a.createElement($.q,null),a.createElement("div",{className:"form"},a.createElement("div",{className:"form-textarea-wrap"+(m?" focused":"")},a.createElement("textarea",{ref:t,className:"form-textarea",rows:"1",placeholder:"Add a comment...",value:i,onChange:function(e){t.current.style.height="";var n=t.current.scrollHeight,i=0<h?h:parseFloat(window.getComputedStyle(t.current).lineHeight);r(t.current.value),c(!0),y(i),t.current.style.height=Math.max(20,h*Math.ceil(n/i))+"px"},onFocus:function(){f(!0)},onBlur:function(){f(!1)}})),a.createElement("div",{className:"form-buttons"},a.createElement("button",{className:""===i.trim()?"disabled":"",onClick:function(){if(l){var e=t.current.value.trim();""!==e&&M.submitComment(e)}}},Q)))))}ee.propTypes={comment_type:l().oneOf(["new","reply"]),media_id:l().oneOfType([l().string,l().number]).isRequired,reply_comment_id:l().oneOfType([l().string,l().number])},ee.defaultProps={comment_type:"new"};function te(e){var t=Y((0,U.B)(),3),n=t[0],i=t[1],r=t[2];return a.createElement("div",{className:"comment-actions"},F.Z._currentValue.can.deleteComment?a.createElement("div",{className:"comment-action remove-comment"},a.createElement(r,{contentRef:n},a.createElement("button",null,"DELETE ","COMMENT")),a.createElement(i,{contentRef:n},a.createElement(G.W8,null,a.createElement("div",{className:"popup-message"},a.createElement("span",{className:"popup-message-title"},J," removal"),a.createElement("span",{className:"popup-message-main"},"You're willing to remove ",K," permanently?")),a.createElement("hr",null),a.createElement("span",{className:"popup-message-bottom"},a.createElement("button",{className:"button-link cancel-comment-removal",onClick:function(){n.current.toggle()}},"CANCEL"),a.createElement("button",{className:"button-link proceed-comment-removal",onClick:function(){n.current.toggle(),M.deleteComment(e.comment_id)}},"PROCEED"))))):null)}function ne(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),i=Y((0,a.useState)(!0),2),r=i[0],o=i[1],l=Y((0,a.useState)(!1),2),s=l[0];return l[1],(0,a.useEffect)((function(){return function(){}}),[]),a.createElement("div",{className:"comment"},a.createElement("div",{className:"comment-inner"},a.createElement("a",{className:"comment-author-thumb",href:e.author_link,title:e.author_name},a.createElement("img",{src:e.author_thumb,alt:e.author_name})),a.createElement("div",{className:"comment-content"},a.createElement("div",{className:"comment-meta"},a.createElement("div",{className:"comment-author"},a.createElement("a",{href:e.author_link,title:e.author_name},e.author_name)),a.createElement("div",{className:"comment-date"},(0,H.WU)(new Date(e.publish_date)))),a.createElement("div",{ref:t,className:"comment-text"+(r?" show-all":"")},a.createElement("div",{ref:n,className:"comment-text-inner",dangerouslySetInnerHTML:{__html:e.text}})),s?a.createElement("button",{className:"toggle-more",onClick:function(){o(!r)}},r?"Show less":"Read more"):null,F.Z._currentValue.can.deleteComment?a.createElement(te,{comment_id:e.comment_id}):null)))}function ie(e){var t=Y((0,a.useState)(d.Z.get("media-id")),2),n=t[0],i=(t[1],Y((0,a.useState)(F.Z._currentValue.can.readComment?d.Z.get("media-comments"):[]),2)),r=i[0],o=i[1],l=Y((0,a.useState)(!1),2),c=l[0],u=l[1];function m(){!function(){var e=document.querySelector(".page-main"),t=e.querySelector(".no-comment"),n=f.Z.get("config-contents").uploader.postUploadMessage;if(""===n)t&&0===comm.length&&t.parentNode.removeChild(t);else if(0===comm.length&&"unlisted"===d.Z.get("media-data").state){if(-1<W.Z._currentValue.profile.home.indexOf(d.Z.get("media-data").author_profile)&&!t){var i=document.createElement("div");i.setAttribute("role","alert"),i.setAttribute("class","alert info alert-dismissible no-comment"),i.innerHTML='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>'+n,e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i),i.querySelector("button.close").addEventListener("click",(function(e){return i.setAttribute("class","alert info alert-dismissible hiding"),setTimeout((function(){i.parentNode.removeChild(i)}),400),e.preventDefault(),e.stopPropagation(),!1}))}}else t&&0<comm.length&&t.parentNode.removeChild(t)}(),o(d.Z.get("media-comments"))}function p(e){m(),setTimeout((function(){B.wN("Comment added","commentSubmit")}),100),console.info('Added comment "'+e+'"')}function h(){setTimeout((function(){B.wN("Comment submition failed","commentSubmitFail")}),100)}function y(e){m(),setTimeout((function(){B.wN("Comment removed","commentDelete")}),100),console.info('Removed comment "'+e+'"')}function v(e){setTimeout((function(){B.wN("Comment removal failed","commentDeleteFail")}),100),console.info('Comment "'+e+'" removal failed')}return(0,a.useEffect)((function(){u(r.length&&F.Z._currentValue.can.readComment&&(d.Z.get("media-data").enable_comments||F.Z._currentValue.can.editMedia))}),[r]),(0,a.useEffect)((function(){return d.Z.on("comments_load",m),d.Z.on("comment_submit",p),d.Z.on("comment_submit_fail",h),d.Z.on("comment_delete",y),d.Z.on("comment_delete_fail",v),function(){d.Z.removeListener("comments_load",m),d.Z.removeListener("comment_submit",p),d.Z.removeListener("comment_submit_fail",h),d.Z.removeListener("comment_delete",y),d.Z.removeListener("comment_delete_fail",v)}}),[]),a.createElement("div",{className:"comments-list"},a.createElement("div",{className:"comments-list-inner"},!F.Z._currentValue.can.readComment||d.Z.get("media-data").enable_comments?null:a.createElement("span",{className:"disabled-comments-msg"},"Comments are disabled"),F.Z._currentValue.can.readComment&&(d.Z.get("media-data").enable_comments||F.Z._currentValue.can.editMedia)?a.createElement("h2",null,r.length?1<r.length?r.length+" Comments":r.length+" "+J:d.Z.get("media-data").enable_comments?"No comment yet":""):null,d.Z.get("media-data").enable_comments?a.createElement(ee,{media_id:n}):null,c?r.map((function(e){return a.createElement(ne,{key:e.uid,comment_id:e.uid,media_id:n,text:e.text,author_name:e.author_name,author_link:e.author_profile,author_thumb:s.Z._currentValue.url+"/"+e.author_thumbnail_url.replace(/^\//g,""),publish_date:e.add_date,likes:0,dislikes:0})})):null))}ne.propTypes={comment_id:l().oneOfType([l().string,l().number]).isRequired,media_id:l().oneOfType([l().string,l().number]).isRequired,text:l().string,author_name:l().string,author_link:l().string,author_thumb:l().string,publish_date:l().oneOfType([l().string,l().number]),likes:l().number,dislikes:l().number},ne.defaultProps={author_name:"",author_link:"#",publish_date:0,likes:0,dislikes:0};var ae=n(1590),re=n.n(ae),oe=n(4860),le=n(8420),se=n(5143);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function de(e,t){return de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},de(e,t)}function me(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(o,e);var t,n,i,a,r=(i=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(i);if(a){var n=fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return me(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).mediacms_config=(0,se.v)(window.MediaCMS),e.browserCache=new oe.Z(e.mediacms_config.site.id,86400),e.data={media_id:null,extendedRateCategories:e.browserCache.get("extended-rate-categories")},e.data.extendedRateCategories=null===e.data.extendedRateCategories?!e.mediacms_config.member.is.anonymous:!!e.data.extendedRateCategories,e}return t=o,(n=[{key:"requestRate",value:function(e,t){(0,le.j0)(this.mediacms_config.api.media+"/"+this.data.media_id+"/actions",{type:"rate",extra_info:{score:t,category_id:e}},{headers:{"X-CSRFToken":(0,le.m5)()}},!1,this.succeedRateResponse.bind(this,e,t),this.failedRateResponse.bind(this,e,t))}},{key:"succeedRateResponse",value:function(e,t,n){this.emit("succeed_rate_submit["+e+"]",t)}},{key:"failedRateResponse",value:function(e,t,n){this.emit("failed_rate_submit["+e+"]",t)}},{key:"get",value:function(e){return"extended-rate-categories"===e?this.data.extendedRateCategories:null}},{key:"actions_handler",value:function(e){switch(e.type){case"INIT":this.data.media_id=e.media_id;break;case"EXTEND_RATE_CATEGORIES":this.data.extendedRateCategories=!this.data.extendedRateCategories,this.browserCache.set("extended-rate-categories",this.data.extendedRateCategories?1:0),this.emit("changed_rate_categories_visibility");break;case"RATE_SUBMIT":this.requestRate(e.id,e.score)}}}])&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(re()),he=(0,le.v$)(new pe,"actions_handler"),ye=n(8416),ve=n.n(ye),be=n(2123);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function we(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ke(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ce(e);if(t){var a=Ce(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}var Re=function(e){ke(n,e);var t=Pe(n);function n(e){var i;return Ee(this,n),(i=t.call(this,e)).initialScore=e.score,i.state={score:e.score,initialScore:e.score,submitingScore:!1,message:null},i.submitRate=i.submitRate.bind(Ne(i)),i.closeRateMessage=i.closeRateMessage.bind(Ne(i)),i.onSucceedRateSubmit=i.onSucceedRateSubmit.bind(Ne(i)),i.onFailedRateSubmit=i.onFailedRateSubmit.bind(Ne(i)),he.on("succeed_rate_submit["+e.id+"]",i.onSucceedRateSubmit),he.on("failed_rate_submit["+e.id+"]",i.onFailedRateSubmit),i}return we(n,[{key:"closeRateMessage",value:function(){this.setState({message:null})}},{key:"onSucceedRateSubmit",value:function(e){this.setState({initialScore:e,submitingScore:!1,message:'Thank you for your rating in category of "<strong>'+this.props.title+'</strong>".'})}},{key:"onFailedRateSubmit",value:function(e){this.setState({submitingScore:!1,message:'A problem has occurred when submitting your score for the category of "<strong>'+this.props.title+'</strong>". Please try again.'})}},{key:"onButtonClick",value:function(e){this.setState({score:e})}},{key:"submitRate",value:function(){this.setState({submitingScore:!0},(function(){var e,t;e=this.props.id,t=this.state.score,ve().dispatch({type:"RATE_SUBMIT",id:e,score:t})}))}},{key:"stars",value:function(){for(var e=[],t=1;t<6;)e.push(a.createElement("div",{key:t,className:(t<=this.state.score?"active":"")+(t===this.state.score?" selected":"")},a.createElement(q.M,{onClick:this.onButtonClick.bind(this,t)},a.createElement("i",{className:"material-icons"},"star_rate")))),t+=1;return e}},{key:"render",value:function(){return a.createElement("div",{className:"rating-category"+(this.state.submitingScore||null!==this.state.message?" submit-loading":"")},a.createElement("div",{className:"category-title"},this.props.title),a.createElement("div",{className:"stars"},this.stars()),a.createElement("div",{className:"rate-action"},a.createElement("button",{disabled:this.state.score===this.state.initialScore,onClick:this.state.score===this.state.initialScore?null:this.submitRate},"Submit score")),this.state.submitingScore?a.createElement("div",{className:"submit-loader"},a.createElement(be.i,null)):null,null!==this.state.message?a.createElement("div",{className:"submit-loader"},a.createElement("div",{className:"submit-msg"},a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.message}})),a.createElement(q.M,{className:"close-msg",onClick:this.closeRateMessage},a.createElement("i",{className:"material-icons"},"clear"))):null)}}]),n}(a.PureComponent);Re.propTypes={id:l().oneOfType([l().string,l().number]).isRequired,title:l().string.isRequired,score:l().number.isRequired};var Ze=function(e){ke(n,e);var t=Pe(n);function n(e){var i;return Ee(this,n),(i=t.call(this,e)).state={extended:he.get("extended-rate-categories")},i.onClickExtend=i.onClickExtend.bind(Ne(i)),i.onRateCategoriesToggle=i.onRateCategoriesToggle.bind(Ne(i)),he.on("changed_rate_categories_visibility",i.onRateCategoriesToggle),i}return we(n,[{key:"componentDidMount",value:function(){var e;e=this.props.media_id,ve().dispatch({type:"INIT",media_id:e})}},{key:"onClickExtend",value:function(){ve().dispatch({type:"EXTEND_RATE_CATEGORIES"})}},{key:"onRateCategoriesToggle",value:function(){this.setState({extended:he.get("extended-rate-categories")})}},{key:"ratingCategories",value:function(){for(var e=[],t=0;t<this.props.ratings_data.length;)e.push(a.createElement(Re,{key:t,id:this.props.ratings_data[t].category_id,title:this.props.ratings_data[t].category_title,score:this.props.ratings_data[t].score})),t+=1;return e}},{key:"render",value:function(){var e;return F.Z._currentValue.is.anonymous&&(e=window.location.href.replace(s.Z._currentValue.url,"").replace(/^\//g,""),e=W.Z._currentValue.signin+"?next=/"+e),a.createElement("div",{className:"ratings-container"+(this.state.extended?" extended":"")},a.createElement("button",{className:"extend-rating-form",onClick:this.onClickExtend},"Rate the film ",a.createElement(q.M,{type:"span"},a.createElement("i",{className:"material-icons"},this.state.extended?"keyboard_arrow_up":"keyboard_arrow_down"))),a.createElement("div",{className:"rating-categories"},F.Z._currentValue.is.anonymous?a.createElement("div",{className:"rating-category need-login"},a.createElement("div",{className:"category-title"},"Ιn order to be able to rate the film you need to be signed in"),a.createElement("div",{className:"rate-action"},a.createElement("a",{href:e,title:"Sign in"},"SIGN IN"))):this.ratingCategories()))}}]),n}(a.PureComponent);function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ae(e){var t,n,i=[];if(e.length)for(t=0,n=1<e.length?", ":"";t<e.length;)i[t]=a.createElement("div",{key:t},a.createElement("a",{href:e[t].url,title:e[t].title},e[t].title),t<e.length-1?n:""),t+=1;return i}function Te(e){return a.createElement("div",{className:"media-author-banner"},a.createElement("div",null,a.createElement("a",{className:"author-banner-thumb",href:e.link||null,title:e.name},a.createElement("span",{style:{backgroundImage:"url("+e.thumb+")"}},a.createElement("img",{src:e.thumb,loading:"lazy",alt:e.name,title:e.name})))),a.createElement("div",null,a.createElement("span",null,a.createElement("a",{href:e.link,className:"author-banner-name",title:e.name},a.createElement("span",null,e.name)))))}function xe(e){return a.createElement("div",{className:"media-content-languages"},a.createElement("div",{className:"media-content-field"},a.createElement("div",{className:"media-content-field-label"},a.createElement("h4",null,e.title)),a.createElement("div",{className:"media-content-field-content"},e.value)))}function je(e){return a.createElement("a",{href:e.link,rel:"nofollow",title:"Edit media",className:"edit-media"},"EDIT MEDIA")}function De(e){return a.createElement("a",{href:e.link,rel:"nofollow",title:"Edit subtitle",className:"edit-subtitle"},"EDIT SUBTITLE")}function Le(e){var t=e.description.trim(),n=d.Z.get("media-production-company"),i=d.Z.get("media-website"),r=d.Z.get("media-license-info"),o=Ae(d.Z.get("media-languages")),l=Ae(d.Z.get("media-topics")),c=!f.Z.get("config-enabled").taxonomies.tags||f.Z.get("config-enabled").taxonomies.tags.enabled?Ae(d.Z.get("media-tags")):[],u=f.Z.get("config-options").pages.media.categoriesWithTitle?[]:!f.Z.get("config-enabled").taxonomies.categories||f.Z.get("config-enabled").taxonomies.categories.enabled?Ae(d.Z.get("media-categories")):[],m=d.Z.get("media-summary");m=m?m.trim():"";var p=Ie((0,U.B)(),3),h=p[0],v=p[1],b=p[2],g=Ie((0,a.useState)(""!==m),2),E=g[0],_=(g[1],Ie((0,a.useState)(""==m),2)),w=_[0],k=_[1];function S(){M.removeMedia(),h.current.toggle()}function P(){h.current.toggle()}function O(e){setTimeout((function(){B.wN("Media removed. Redirecting...","mediaDelete"),setTimeout((function(){window.location.href=s.Z._currentValue.url+"/"+d.Z.get("media-data").author_profile.replace(/^\//g,"")}),2e3)}),100),void 0!==e&&console.info("Removed media '"+e+'"')}function N(e){setTimeout((function(){B.wN("Media removal failed","mediaDeleteFail")}),100),void 0!==e&&console.info('Media "'+e+'" removal failed')}function C(){k(!w)}(0,a.useEffect)((function(){return d.Z.on("media_delete",O),d.Z.on("media_delete_fail",N),function(){d.Z.removeListener("media_delete",O),d.Z.removeListener("media_delete_fail",N)}}),[]);var R=(0,y.U)(e.author.url,s.Z._currentValue.url),Z=(0,y.U)(e.author.thumb,s.Z._currentValue.url),I=d.Z.get("media-data").ratings_info;void 0!==I&&I.length||(I=null);var A,T=null!==r&&""!==r?"License":"Copyright";return A=null!==r&&""!==r?a.createElement("a",{href:r.url,title:r.title,className:"media-license-link",target:"_blank",rel:"nofollow"},a.createElement("span",null,a.createElement("img",{src:r.thumbnail,alt:""})),a.createElement("span",null,r.title)):a.createElement("span",null,"All rights reserved."),a.createElement(F.c,null,(function(r){return a.createElement("div",{className:"media-info-content"},void 0===f.Z.get("config-media-item").displayAuthor||null===f.Z.get("config-media-item").displayAuthor||f.Z.get("config-media-item").displayAuthor?a.createElement(Te,{link:R,thumb:Z,name:e.author.name,published:e.published}):null,a.createElement("div",{className:"media-content-banner"+(null!==n&&""!==n?" large-fields-title":"")},a.createElement("div",{className:"media-content-banner-inner"},E?a.createElement("div",{className:"media-content-summary"},m):null,E&&!w||!t?null:f.Z.get("config-options").pages.media.htmlInDescription?a.createElement("div",{className:"media-content-description",dangerouslySetInnerHTML:{__html:t}}):a.createElement("div",{className:"media-content-description"},t),E?a.createElement("button",{className:"load-more",onClick:C},w?"SHOW LESS":"SHOW MORE"):null,o.length?a.createElement(xe,{value:o,title:1<o.length?"Languages":"Language"}):null,!!e.yearProduced&&a.createElement(xe,{value:a.createElement("span",{className:"media-year-produced"},e.yearProduced),title:"Year produced"}),l.length?a.createElement(xe,{value:l,title:1<l.length?"Topics":"Topic"}):null,u.length?a.createElement(xe,{value:u,title:1<u.length?"Categories":"Category"}):null,null!==n&&""!==n?a.createElement(xe,{value:n,title:"Production company"}):null,i&&a.createElement(xe,{value:a.createElement("a",{href:i,target:"_blank",rel:"noreferrer noopener"},i),title:"Website"}),d.Z.get("display-media-license-info")?a.createElement(xe,{value:A,title:T}):null,c.length?a.createElement(xe,{value:c,title:1<c.length?"Tags":"Tag"}):null,r.can.editMedia||r.can.editSubtitle||r.can.deleteMedia?a.createElement("div",{className:"media-author-actions"},r.can.editMedia?a.createElement(je,{link:d.Z.get("media-data").edit_url}):null,r.can.editSubtitle&&"video"===d.Z.get("media-data").media_type?a.createElement(De,{link:d.Z.get("media-data").edit_url.replace("edit?","add_subtitle?")}):null,a.createElement(b,{contentRef:h},a.createElement("button",{className:"remove-media"},"DELETE MEDIA")),a.createElement(v,{contentRef:h},a.createElement(G.W8,null,a.createElement("div",{className:"popup-message"},a.createElement("span",{className:"popup-message-title"},"Media removal"),a.createElement("span",{className:"popup-message-main"},"You're willing to remove media permanently?")),a.createElement("hr",null),a.createElement("span",{className:"popup-message-bottom"},a.createElement("button",{className:"button-link cancel-comment-removal",onClick:P},"CANCEL"),a.createElement("button",{className:"button-link proceed-comment-removal",onClick:S},"PROCEED"))))):null)),null!==I?a.createElement(Ze,{media_id:d.Z.get("media-id"),ratings_data:I}):null,a.createElement(ie,null))}))}Ze.propTypes={media_id:l().string.isRequired,ratings_data:l().array.isRequired},n(5090);var Ve=a.createContext((0,se.v)(window.MediaCMS).playlists),Ue={notifications:(0,se.v)(window.MediaCMS).notifications.messages},Fe=a.createContext(Ue),Be=(Fe.Consumer,Fe);function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function qe(e){(0,a.useRef)(null);var t=He((0,a.useState)(d.Z.get("user-liked-media")),2),n=t[0],i=t[1],r=He((0,a.useState)((0,le.uf)(d.Z.get("media-likes"),!1)),2),o=r[0],l=r[1];function s(){i(d.Z.get("user-liked-media")),l((0,le.uf)(d.Z.get("media-likes"),!1))}function c(){s(),B.wN(Be._currentValue.addToLiked,"likedMedia")}function u(){s(),B.wN(Be._currentValue.removeFromLiked,"unlikedMedia")}function m(){B.wN("Action failed","likedMediaRequestFail")}return(0,a.useEffect)((function(){return d.Z.on("liked_media",c),d.Z.on("unliked_media",u),d.Z.on("liked_media_failed_request",m),function(){d.Z.removeListener("liked_media",c),d.Z.removeListener("unliked_media",u),d.Z.removeListener("liked_media_failed_request",m)}}),[]),a.createElement("div",{className:"like"},a.createElement("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),M[n?"unlikeMedia":"likeMedia"]()}},a.createElement(q.M,{type:"span"},a.createElement(z.O,{type:"thumb_up"})),a.createElement("span",{className:"likes-counter"},o)))}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ge(e){(0,a.useRef)(null);var t=ze((0,a.useState)(d.Z.get("user-liked-media")),2),n=t[0],i=t[1],r=ze((0,a.useState)((0,le.uf)(d.Z.get("media-likes"),!1)),2),o=r[0],l=r[1];function s(){i(d.Z.get("user-disliked-media")),l((0,le.uf)(d.Z.get("media-dislikes"),!1))}function c(){s(),B.wN(Be._currentValue.messages.addToDisliked,"mediaDislike")}function u(){s(),B.wN(Be._currentValue.messages.removeFromDisliked,"cancelMediaDislike")}function m(){B.wN("Action failed","mediaDislikeRequestFail")}return(0,a.useEffect)((function(){return d.Z.on("disliked_media",c),d.Z.on("undisliked_media",u),d.Z.on("disliked_media_failed_request",m),function(){d.Z.removeListener("disliked_media",c),d.Z.removeListener("undisliked_media",u),d.Z.removeListener("disliked_media_failed_request",m)}}),[]),a.createElement("div",{className:"like"},a.createElement("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),M[n?"undislikeMedia":"dislikeMedia"]()}},a.createElement(q.M,{type:"span"},a.createElement(z.O,{type:"thumb_down"})),a.createElement("span",{className:"dislikes-counter"},o)))}function Ye(e){return a.createElement("div",{className:"download hidden-only-in-small"},a.createElement("a",{href:e.link,target:"_blank",download:e.title,title:"Download"},a.createElement(q.M,{type:"span"},a.createElement(z.O,{type:"arrow_downward"})),a.createElement("span",null,"DOWNLOAD")))}Ye.propTypes={link:l().string.isRequired,title:l().string.isRequired},n(9751),n(9628);var Xe=n(8534),Ke=n(6760);function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function et(){var e,t,n=d.Z.get("media-data"),i=(n.title,n.encodings_info),a={};for(e in i)if(i.hasOwnProperty(e)&&Object.keys(i[e]).length)for(t in i[e])if(i[e].hasOwnProperty(t)&&"success"===i[e][t].status&&100===i[e][t].progress){var r=n.title+"_"+e+"_"+t;r+="vp9"===t?".webm":".mp4",a[i[e][t].title]={text:e+" - "+t.toUpperCase()+" ("+i[e][t].size+")",link:(0,y.U)(i[e][t].url,s.Z._currentValue.url),linkAttr:{target:"_blank",download:r}}}return a.original_media_url={text:"Original file ("+n.size+")",link:(0,y.U)(n.original_media_url,s.Z._currentValue.url),linkAttr:{target:"_blank",download:n.title}},Object.values(a)}function tt(e){var t=Je((0,U.B)(),3),n=t[0],i=t[1],r=t[2],o=Je((0,a.useState)("main"),2),l=o[0];return o[1],a.createElement("div",{className:"video-downloads hidden-only-in-small"},a.createElement(r,{contentRef:n},a.createElement("button",null,a.createElement(q.M,{type:"span"},a.createElement(z.O,{type:"arrow_downward"})),a.createElement("span",null,"DOWNLOAD"))),a.createElement("div",{className:"nav-page-"+l},a.createElement(i,{contentRef:n},a.createElement(Ke.o,{pageChangeCallback:null,initPage:"main",focusFirstItemOnPageChange:!1,pages:{main:a.createElement("div",{className:"main-options"},a.createElement(G.W8,null,a.createElement(Xe.S,{items:et()})))},pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"}))))}var nt=n(6008);function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rt(e){return e.renderDate?a.createElement("label",null,a.createElement("input",{type:"checkbox",checked:e.isChecked,onChange:function(t){t.persist(),e.isChecked?M.removeMediaFromPlaylist(e.playlistId,d.Z.get("media-id")):M.addMediaToPlaylist(e.playlistId,d.Z.get("media-id"))}}),a.createElement("span",null,e.title)):null}function ot(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),i=it((0,a.useState)(new Date),2),r=i[0],o=i[1],l=it((0,a.useState)(d.Z.get("playlists")),2),s=l[0],c=l[1],u=it((0,a.useState)(!1),2),m=(u[0],u[1]),p=it((0,a.useState)("tab1"),2),h=p[0],y=p[1];function v(){k()}function b(){c(d.Z.get("playlists")),o(new Date)}function g(){c(d.Z.get("playlists")),o(new Date),setTimeout((function(){B.wN("Media added to playlist","playlistMediaAdditionComplete")}),100)}function E(){setTimeout((function(){B.wN("Media's addition to playlist failed","playlistMediaAdditionFail")}),100)}function _(){c(d.Z.get("playlists")),o(new Date),setTimeout((function(){B.wN("Media removed from playlist","playlistMediaRemovalComplete")}),100)}function w(){setTimeout((function(){B.wN("Media's removal from playlist failed","playlistMediaaRemovalFail")}),100)}function k(){null!==n.current&&(n.current.style.maxHeight=window.innerHeight-74-(t.current.offsetHeight-n.current.offsetHeight)+"px")}function S(){m(!1),void 0!==e.triggerPopupClose&&e.triggerPopupClose()}return(0,a.useEffect)((function(){k()})),(0,a.useEffect)((function(){return f.Z.on("window_resize",v),d.Z.on("playlists_load",b),d.Z.on("media_playlist_addition_completed",g),d.Z.on("media_playlist_addition_failed",E),d.Z.on("media_playlist_removal_completed",_),d.Z.on("media_playlist_removal_failed",w),function(){f.Z.removeListener("window_resize",v),d.Z.removeListener("playlists_load",b),d.Z.removeListener("media_playlist_addition_completed",g),d.Z.removeListener("media_playlist_addition_failed",E),d.Z.removeListener("media_playlist_removal_completed",_),d.Z.removeListener("media_playlist_removal_failed",w)}}),[]),a.createElement("div",{ref:t,className:"saveto-popup"},a.createElement("div",{className:"hw-tabs"},a.createElement(q.M,{type:"button",onClick:S},a.createElement(z.O,{type:"close"})),a.createElement("ul",{className:"nav"},a.createElement("li",{className:"tab1"===h?"active":"",onClick:function(){y("tab1")}},a.createElement("span",null,"Save to")),a.createElement("li",{className:"tab2"===h?"active":"",onClick:function(){y("tab2")}},a.createElement("span",null,"Create new"))),a.createElement("div",{className:"outlet"},"tab1"===h?a.createElement("div",{className:"FirstTab"},s.length?a.createElement("div",{ref:n,className:"saveto-select"},function(){for(var e=d.Z.get("media-id"),t=[],n=0;n<s.length;)t.push(a.createElement("div",{key:"playlist_"+s[n].playlist_id},a.createElement(rt,{renderDate:r,title:s[n].title,privacy:s[n].status,isChecked:-1<s[n].media_list.indexOf(e),playlistId:s[n].playlist_id}))),n+=1;return t}()):a.createElement("div",{className:"saveto-select"},"There are no any playlists yet.")):a.createElement("div",{className:"SecondTab"},a.createElement("div",{className:"saveto-new-playlist"},a.createElement(nt.A,{onCancel:S,onPlaylistSave:function(e){var t=d.Z.get("media-id");M.addNewPlaylist(e),M.addMediaToPlaylist(e.playlist_id,t),S()}}))))))}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ct(e){var t,n=lt((0,U.B)(),3),i=n[0],r=n[1],o=n[2],l=lt((0,a.useState)("selectPlaylist"),2),s=l[0],c=l[1];return a.createElement("div",{className:"save"},a.createElement(o,{contentRef:i},a.createElement("button",null,a.createElement(q.M,{type:"span"},a.createElement(z.O,{type:"playlist_add"})),a.createElement("span",null,"SAVE"))),a.createElement(r,{contentRef:i},a.createElement(Ke.o,{initPage:s,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id",pages:(t=function(){i.current.toggle()},{selectPlaylist:a.createElement("div",{className:"popup-fullscreen"},a.createElement(G.W8,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement(ot,{triggerPopupClose:t}))),createPlaylist:a.createElement("div",{className:"popup-fullscreen"},a.createElement(G.W8,null,a.createElement("span",{className:"popup-fullscreen-overlay"})))}),focusFirstItemOnPageChange:!1,pageChangeCallback:c})))}n(291),rt.propTypes={playlistId:l().string,isChecked:l().bool,title:l().string},rt.defaultProps={isChecked:!1,title:""},ot.propTypes={triggerPopupClose:l().func},n(8833),n(815),n(9174);var ut=n(731);function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ft(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),i=dt((0,a.useState)(null),2),r=i[0],o=i[1],l=dt((0,a.useState)(null),2),s=l[0],c=l[1];return(0,a.useEffect)((function(){o(function(e,t,n){if(void 0!==e){var i;return i=void 0!==t&&t>e?t:e,void 0!==n&&n<i?n:i}return void 0!==t?t:void 0!==n?n:void 0}(0+e.defaultValue,e.minValue,e.maxValue)),c(function(e,t){if(!t||!t.length)return null;for(var n=0;n<t.length;){if(void 0!==t[n].key&&e===t[n].key)return t[n].key;n+=1}return t[0].key}(e.defaultUnit,e.units))})),a.createElement("div",{className:"num-value-unit"},void 0!==e.label?a.createElement("span",{className:"label"},e.label):null,a.createElement("input",{ref:t,className:"value-input",type:"number",value:null!==r?r:"",min:void 0!==e.minValue?e.minValue:null,max:void 0!==e.maxValue?e.maxValue:null,onChange:function(){o(t.current.value),void 0!==e.valueCallback&&e.valueCallback(t.current.value)}}),a.createElement("select",{ref:n,className:"value-unit",onChange:function(){c(n.current.value),void 0!==e.unitCallback&&e.unitCallback(n.current.value)},value:null!==s?s:""},function(){if(!e.units.length)return null;for(var t=[],n=0;n<e.units.length;)void 0!==e.units[n].key&&t.push(a.createElement("option",{key:e.units[n].key,value:e.units[n].key},void 0!==e.units[n].label?e.units[n].label:e.units[n].key)),n+=1;return t}()))}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yt(e){var t=f.Z.get("config-options").embedded.video.dimensions,n=(0,a.useContext)(W.Z),i=(0,a.useRef)(null),o=(0,a.useRef)(null),l=(0,a.useRef)(null),s=(0,a.useRef)(null),c=(0,a.useRef)(null),u=pt((0,a.useState)(window.innerHeight-144+56),2),m=u[0],p=u[1],h=pt((0,a.useState)(!1),2),y=h[0],v=h[1],b=pt((0,a.useState)("16:9"),2),g=b[0],E=b[1],_=pt((0,a.useState)(t.width),2),w=_[0],k=_[1],S=pt((0,a.useState)(t.widthUnit),2),P=S[0],O=S[1],N=pt((0,a.useState)(t.height),2),C=N[0],R=N[1],Z=pt((0,a.useState)(t.heightUnit),2),I=Z[0],A=Z[1],T=pt((0,a.useState)(60),2),x=T[0],j=T[1],D=pt((0,a.useState)(60),2),L=D[0],V=D[1],U=pt((0,a.useState)([{key:"px",label:"px"},{key:"percent",label:"%"}]),2),F=U[0],H=U[1];function $(){p(window.innerHeight-144+56),j(l.current.offsetHeight),V(c.current.offsetHeight)}function G(){setTimeout((function(){B.wN("Embed media code copied to clipboard","clipboardEmbedMediaCodeCopy")}),100)}return(0,a.useEffect)((function(){p(window.innerHeight-144+56),j(l.current.offsetHeight),V(c.current.offsetHeight)})),(0,a.useEffect)((function(){return f.Z.on("window_resize",$),d.Z.on("copied_embed_media_code",G),function(){f.Z.removeListener("window_resize",$),d.Z.removeListener("copied_embed_media_code",G)}}),[]),a.createElement("div",{className:"share-embed",style:{maxHeight:m+"px"}},a.createElement("div",{className:"share-embed-inner"},a.createElement("div",{className:"on-left"},a.createElement("div",{className:"media-embed-wrap"},a.createElement(r.Z,{data:d.Z.get("media-data"),inEmbed:!0}))),a.createElement("div",{ref:o,className:"on-right"},a.createElement("div",{ref:l,className:"on-right-top"},a.createElement("div",{className:"on-right-top-inner"},a.createElement("span",{className:"ttl"},"Embed Video"),a.createElement(q.M,{type:"button",onClick:function(){void 0!==e.triggerPopupClose&&e.triggerPopupClose()}},a.createElement(z.O,{type:"close"})))),a.createElement("div",{ref:s,className:"on-right-middle",style:{top:x+"px",bottom:L+"px"}},a.createElement("textarea",{readOnly:!0,value:'<iframe width="'+("percent"===P?w+"%":w)+'" height="'+("percent"===I?C+"%":C)+'" src="'+n.embed+d.Z.get("media-id")+'" frameborder="0" allowfullscreen></iframe>'}),a.createElement("div",{className:"iframe-config"},a.createElement("div",{className:"iframe-config-options-title"},"Embed options"),a.createElement("div",{className:"iframe-config-option"},a.createElement("div",{className:"option-content"},a.createElement("div",{className:"ratio-options"},a.createElement("div",{className:"options-group"},a.createElement("label",{style:{minHeight:"36px"}},a.createElement("input",{type:"checkbox",checked:y,onChange:function(){var e=!y,t=g.split(":"),n=t[0],i=t[1];v(e),O(e?"px":P),A(e?"px":I),R(e?parseInt(w*i/n,10):C),H(e?[{key:"px",label:"px"}]:[{key:"px",label:"px"},{key:"percent",label:"%"}])}}),"Keep aspect ratio")),y?a.createElement("div",{className:"options-group"},a.createElement("select",{ref:i,onChange:function(){var e=i.current.value,t=e.split(":"),n=t[0],a=t[1];E(e),R(y?parseInt(w*a/n,10):C)},value:g},a.createElement("optgroup",{label:"Horizontal orientation"},a.createElement("option",{value:"16:9"},"16:9"),a.createElement("option",{value:"4:3"},"4:3"),a.createElement("option",{value:"3:2"},"3:2")),a.createElement("optgroup",{label:"Vertical orientation"},a.createElement("option",{value:"9:16"},"9:16"),a.createElement("option",{value:"3:4"},"3:4"),a.createElement("option",{value:"2:3"},"2:3")))):null),a.createElement("br",null),a.createElement("div",{className:"options-group"},a.createElement(ft,{valueCallback:function(e){e=""===e?0:e;var t=g.split(":"),n=t[0],i=t[1];k(e),R(y?parseInt(e*i/n,10):C)},unitCallback:function(e){O(e)},label:"Width",defaultValue:parseInt(w,10),defaultUnit:P,minValue:1,maxValue:99999,units:F})),a.createElement("div",{className:"options-group"},a.createElement(ft,{valueCallback:function(e){e=""===e?0:e;var t=g.split(":"),n=t[0],i=t[1];R(e),k(y?parseInt(e*n/i,10):w)},unitCallback:function(e){A(e)},label:"Height",defaultValue:parseInt(C,10),defaultUnit:I,minValue:1,maxValue:99999,units:F})))))),a.createElement("div",{ref:c,className:"on-right-bottom"},a.createElement("button",{onClick:function(){M.copyEmbedMediaCode(s.current.querySelector("textarea"))}},"COPY")))))}ft.propTypes={label:l().string,units:l().array.isRequired,defaultUnit:l().string,defaultValue:l().number,minValue:l().number,maxValue:l().number,valueCallback:l().func,unitCallback:l().func},yt.propTypes={triggerPopupClose:l().func},n(5777);var vt=n(6157),bt=a.createContext((0,se.v)(window.MediaCMS).media.share.options);function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _t(e){var t=e.onClick;return a.createElement("span",{className:"next-slide"},a.createElement(q.M,{buttonShadow:!0,onClick:t},a.createElement("i",{className:"material-icons"},"keyboard_arrow_right")))}function wt(e){var t=e.onClick;return a.createElement("span",{className:"previous-slide"},a.createElement(q.M,{buttonShadow:!0,onClick:t},a.createElement("i",{className:"material-icons"},"keyboard_arrow_left")))}function kt(){return{maxFormContentHeight:vt.Z.get("container-height")-196,maxPopupWidth:518>vt.Z.get("container-width")-80?vt.Z.get("container-width")-80:null}}function St(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),i=d.Z.get("media-url"),r=gt((0,a.useState)(null),2),o=r[0],l=r[1],s=gt((0,a.useState)({prev:!1,next:!1}),2),c=s[0],u=s[1],m=gt((0,a.useState)(kt()),2),p=m[0],h=m[1],y=gt((0,a.useState)(function(){var e=function(){for(var e=bt._currentValue,t=d.Z.get("media-url"),n=d.Z.get("media-data").title,i={},a=0;a<e.length;){switch(e[a]){case"embed":"video"===d.Z.get("media-data").media_type&&(i[e[a]]={});break;case"email":i[e[a]]={title:"Email",shareUrl:"mailto:?body="+t};break;case"fb":i[e[a]]={title:"Facebook",shareUrl:"https://www.facebook.com/sharer.php?u="+t};break;case"tw":i[e[a]]={title:"Twitter",shareUrl:"https://twitter.com/intent/tweet?url="+t};break;case"reddit":i[e[a]]={title:"reddit",shareUrl:"https://reddit.com/submit?url="+t+"&title="+n};break;case"tumblr":i[e[a]]={title:"Tumblr",shareUrl:"https://www.tumblr.com/widgets/share/tool?canonicalUrl="+t+"&title="+n};break;case"pinterest":i[e[a]]={title:"Pinterest",shareUrl:"http://pinterest.com/pin/create/link/?url="+t};break;case"vk":i[e[a]]={title:"ВКонтакте",shareUrl:"http://vk.com/share.php?url="+t+"&title="+n};break;case"linkedin":i[e[a]]={title:"LinkedIn",shareUrl:"https://www.linkedin.com/shareArticle?mini=true&url="+t};break;case"mix":i[e[a]]={title:"Mix",shareUrl:"https://mix.com/add?url="+t};break;case"whatsapp":i[e[a]]={title:"WhatsApp",shareUrl:"whatsapp://send?text="+t};break;case"telegram":i[e[a]]={title:"Telegram",shareUrl:"https://t.me/share/url?url="+t+"&text="+n}}a+=1}return i}(),t=[];for(var n in e)e.hasOwnProperty(n)&&("embed"===n?t.push(a.createElement("div",{key:"share-"+n,className:"sh-option share-"+n+"-opt"},a.createElement("button",{className:"sh-option change-page","data-page-id":"shareEmbed"},a.createElement("span",null,a.createElement("i",{className:"material-icons"},"code")),a.createElement("span",null,"Embed")))):"whatsapp"===n?t.push(a.createElement("div",{key:"share-"+n,className:"sh-option share-"+n},a.createElement("a",{href:e[n].shareUrl,title:"",target:"_blank","data-action":"share/whatsapp/share"},a.createElement("span",null),a.createElement("span",null,e[n].title)))):"email"===n?t.push(a.createElement("div",{key:"share-email",className:"sh-option share-email"},a.createElement("a",{href:e[n].shareUrl,title:""},a.createElement("span",null,a.createElement("i",{className:"material-icons"},"email")),a.createElement("span",null,e[n].title)))):t.push(a.createElement("div",{key:"share-"+n,className:"sh-option share-"+n},a.createElement("a",{href:e[n].shareUrl,title:"",target:"_blank"},a.createElement("span",null),a.createElement("span",null,e[n].title)))));return t}()),1)[0],v=gt((0,a.useState)(0),2),b=v[0],g=v[1],E=gt((0,a.useState)(0),2),_=E[0],w=E[1],k=gt((0,a.useState)(!1),2),S=k[0],P=k[1],O=gt((0,a.useState)(i),2),N=O[0],C=O[1];function R(){h(kt())}function Z(){setTimeout((function(){B.wN("Link copied to clipboard","clipboardLinkCopy")}),100)}function I(){o.scrollToCurrentSlide(),u({prev:o.hasPreviousSlide(),next:o.hasNextSlide()})}return(0,a.useEffect)((function(){l(new ut.Z(n.current,".sh-option"))}),[y]),(0,a.useEffect)((function(){o&&(o.updateDataStateOnResize(y.length,!0,!0),I())}),[p,o]),(0,a.useEffect)((function(){f.Z.on("window_resize",R),d.Z.on("copied_media_link",Z);var e,t,n,i,a,r=null===(e=document.getElementsByTagName("video")[0])||void 0===e?void 0:e.currentTime;return g(r),w((a=(t=parseInt(r,10))-3600*(n=Math.floor(t/3600))-60*(i=Math.floor((t-3600*n)/60)),n<10&&(n="0"+n),i<10&&(i="0"+i),a<10&&(a="0"+a),n>=1?n+":"+i+":"+a:i+":"+a)),function(){f.Z.removeListener("window_resize",R),d.Z.removeListener("copied_media_link",Z),l(null)}}),[]),a.createElement("div",{ref:t,style:null!==p.maxPopupWidth?{maxWidth:p.maxPopupWidth+"px"}:null},a.createElement("div",{className:"scrollable-content",style:null!==p.maxFormContentHeight?{maxHeight:p.maxFormContentHeight+"px"}:null},a.createElement("div",{className:"share-popup-title"},"Share media"),y.length?a.createElement("div",{className:"share-options"},c.prev?a.createElement(wt,{onClick:function(){o.previousSlide(),I()}}):null,a.createElement("div",{ref:n,className:"share-options-inner"},y),c.next?a.createElement(_t,{onClick:function(){o.nextSlide(),I()}}):null):null),a.createElement("div",{className:"copy-field"},a.createElement("div",null,a.createElement("input",{type:"text",readOnly:!0,value:N}),a.createElement("button",{onClick:function(){M.copyShareLink(t.current.querySelector(".copy-field input"))}},"COPY"))),a.createElement("div",{className:"start-at"},a.createElement("label",null,a.createElement("input",{type:"checkbox",name:"start-at-checkbox",id:"id-start-at-checkbox",checked:S,onChange:function(){var e;P(!S),e=S?i:i+"&t="+Math.trunc(b),C(e)}}),"Start at ",_)))}function Pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(){return{shareOptions:a.createElement("div",{className:"popup-fullscreen"},a.createElement(G.W8,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement(St,null)))}}function It(e){var t,n=Pt((0,U.B)(),3),i=n[0],r=n[1],o=n[2],l=Pt((0,a.useState)("shareOptions"),2),s=l[0],c=l[1];return a.createElement("div",{className:"share"},a.createElement(o,{contentRef:i},a.createElement("button",null,a.createElement(q.M,{type:"span"},a.createElement(z.O,{type:"share"})),a.createElement("span",null,"SHARE"))),a.createElement(r,{contentRef:i,hideCallback:function(){c("shareOptions")}},a.createElement(Ke.o,{initPage:s,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id",pages:e.isVideo?(t=function(){i.current.toggle()},Ct(Ct({},Zt()),{},{shareEmbed:a.createElement("div",{className:"popup-fullscreen share-embed-popup"},a.createElement(G.W8,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement(yt,{triggerPopupClose:t})))})):Zt(),focusFirstItemOnPageChange:!1,pageChangeCallback:function(e){c(e)}})))}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function At(e){var t,n,i=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(t=(0,a.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],s=o[1];function c(){s(vt.Z.get("container-height")-(104+i.current.offsetHeight))}return(0,a.useEffect)((function(){return c(),f.Z.on("window_resize",c),function(){f.Z.removeListener("window_resize",c)}}),[]),a.createElement("form",null,a.createElement("div",{className:"report-form",style:null!==l?{maxHeight:l+"px"}:null},a.createElement("div",{className:"form-title"},"Report media"),a.createElement("div",{className:"form-field"},a.createElement("span",{className:"label"},"URL"),a.createElement("input",{type:"text",readOnly:!0,value:e.mediaUrl})),a.createElement("div",{className:"form-field"},a.createElement("span",{className:"label"},"Description"),a.createElement("textarea",{ref:r,required:!0})),a.createElement("div",{className:"form-field form-help-text"},"Reported media is reviewed")),a.createElement("div",{ref:i,className:"form-actions-bottom"},a.createElement("button",{className:"cancel",onClick:function(t){t.preventDefault(),void 0!==e.cancelReportForm&&e.cancelReportForm()}},"CANCEL"),a.createElement("button",{onClick:function(t){var n=r.current.value.trim();""!==n&&(t.preventDefault(),void 0!==e.submitReportForm&&e.submitReportForm(n))}},"SUBMIT")))}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function jt(e,t){F.Z._currentValue;var n,i,a=s.Z._currentValue,r=e.encodings_info,o={};for(n in r)if(r.hasOwnProperty(n)&&Object.keys(r[n]).length)for(i in r[n])r[n].hasOwnProperty(i)&&"success"===r[n][i].status&&100===r[n][i].progress&&(o[r[n][i].title]={text:n+" - "+i.toUpperCase()+" ("+r[n][i].size+")",link:(0,y.U)(r[n][i].url,a.url),linkAttr:{target:"_blank",download:e.title+"_"+n+"_"+i.toUpperCase()}});return o.original_media_url={text:"Original file ("+e.size+")",link:(0,y.U)(e.original_media_url,a.url),linkAttr:{target:"_blank",download:e.title}},Object.values(o)}function Dt(e,t,n,i,r,o){var l=F.Z._currentValue,c=e.url,u=e.media_type,d=e.state||"N/A",m=e.encoding_status||"N/A",f=e.reported_times,p=e.is_reviewed,h="video"===u,y=function(e,t,n,i){var a=[],r=F.Z._currentValue,o=(s.Z._currentValue,"video"===e.media_type),l=e.reported_times;return t&&r.can.downloadMedia&&(o?a.push({itemType:"open-subpage",text:"Download",icon:"arrow_downward",itemAttr:{className:"visible-only-in-small"},buttonAttr:{className:"change-page","data-page-id":"videoDownloadOptions"}}):n&&a.push({itemType:"link",link:n,text:"Download",icon:"arrow_downward",itemAttr:{className:"visible-only-in-small"},linkAttr:{target:"_blank",download:e.title}})),o&&r.can.editMedia&&a.push({itemType:"open-subpage",text:"Status info",icon:"info",buttonAttr:{className:"change-page","data-page-id":"mediaStatusInfo"}}),r.can.reportMedia&&(i?a.push({itemType:"div",text:"Reported",icon:"flag",divAttr:{className:"reported-label loggedin-media-reported"}}):a.push({itemType:"open-subpage",text:"Report",icon:"flag",buttonAttr:{className:"change-page"+(l?" loggedin-media-reported":""),"data-page-id":"loggedInReportMedia"}})),a}(e,t,n,i),v={};return y.length&&(v.main=a.createElement("div",{className:"main-options"},a.createElement(G.W8,null,a.createElement(Xe.S,{items:y})))),l.can.reportMedia&&(v.loggedInReportMedia=i?null:a.createElement("div",{className:"popup-fullscreen"},a.createElement(G.W8,null,a.createElement("span",{className:"popup-fullscreen-overlay"}),a.createElement("div",null,a.createElement(At,{mediaUrl:c,submitReportForm:r,cancelReportForm:o}))))),l.can.editMedia&&(v.mediaStatusInfo=a.createElement("div",{className:"main-options"},a.createElement(G.W8,null,a.createElement("ul",{className:"media-status-info"},a.createElement("li",null,"Media type: ",a.createElement("span",null,u)),a.createElement("li",null,"State: ",a.createElement("span",null,d)),a.createElement("li",null,"Review state: ",a.createElement("span",null,p?"Is reviewed":"Pending review")),h?a.createElement("li",null,"Encoding Status: ",a.createElement("span",null,m)):null,f?a.createElement("li",{className:"reports"},"Reports: ",a.createElement("span",null,f)):null)))),t&&l.can.downloadMedia&&h&&(v.videoDownloadOptions=a.createElement("div",{className:"video-download-options"},a.createElement(G.W8,null,a.createElement(Xe.S,{items:jt(e)})))),v}At.propTypes={mediaUrl:l().string.isRequired,cancelReportForm:l().func,submitReportForm:l().func};var Lt="more-options active-options";function Vt(e){var t=F.Z._currentValue,n=s.Z._currentValue,i=(0,y.U)(d.Z.get("media-original-url"),n.url),r=d.Z.get("media-data"),o="video"===r.media_type,l=Tt((0,U.B)(),3),c=l[0],u=l[1],m=l[2],f=Tt((0,a.useState)(!1),2),p=f[0],h=f[1],v=Tt((0,a.useState)(!1),2),b=v[0],g=v[1],E=Tt((0,a.useState)({}),2),_=E[0],w=E[1],k=Tt((0,a.useState)("main"),2),S=k[0],P=k[1],O=Tt((0,a.useState)(Lt),2),N=O[0],C=O[1];function R(e){M.reportMedia(e)}function Z(){c.current.toggle()}function I(){c.current.tryToHide(),setTimeout((function(){B.wN("Media Reported","reportedMedia"),g(!0),d.Z.removeListener("reported_media",I)}),100)}return(0,a.useEffect)((function(){b||(p?d.Z.on("reported_media",I):d.Z.removeListener("reported_media",I))}),[p]),(0,a.useEffect)((function(){h(Object.keys(_).length&&e.allowDownload&&t.can.downloadMedia)}),[_]),(0,a.useEffect)((function(){var n=Lt;e.allowDownload&&t.can.downloadMedia&&"videoDownloadOptions"===S&&(n+=" video-downloads"),1===Object.keys(_).length&&e.allowDownload&&t.can.downloadMedia&&(o||i)&&(n+=" visible-only-in-small"),C(n)}),[S]),(0,a.useEffect)((function(){w(Dt(r,e.allowDownload,i,b,R,Z))}),[b]),(0,a.useEffect)((function(){return w(Dt(r,e.allowDownload,i,b,R,Z)),function(){p&&!b&&d.Z.removeListener("reported_media",I)}}),[]),p?a.createElement("div",{className:N},a.createElement(m,{contentRef:c},a.createElement("span",null,a.createElement(q.M,{type:"button"},a.createElement(z.O,{type:"more_horiz"})))),a.createElement("div",{className:"nav-page-"+S},a.createElement(u,{contentRef:c,hideCallback:function(){P("main")}},a.createElement(Ke.o,{pageChangeCallback:function(e){P(e)},initPage:S,focusFirstItemOnPageChange:!1,pages:_,pageChangeSelector:".change-page",pageIdSelectorAttr:"data-page-id"})))):null}function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bt(e,t){return Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Bt(e,t)}function Ht(e,t){if(t&&("object"===Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wt(e)}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}Vt.propTypes={allowDownload:l().bool.isRequired},Vt.defaultProps={allowDownload:!1};var zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bt(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qt(i);if(r){var n=qt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ht(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={likedMedia:d.Z.get("user-liked-media"),dislikedMedia:d.Z.get("user-disliked-media")},t.downloadLink="video"!==d.Z.get("media-type")?(0,y.U)(d.Z.get("media-original-url"),s.Z._currentValue.url):null,t.updateStateValues=t.updateStateValues.bind(Wt(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){d.Z.on("liked_media",this.updateStateValues),d.Z.on("unliked_media",this.updateStateValues),d.Z.on("disliked_media",this.updateStateValues),d.Z.on("undisliked_media",this.updateStateValues);var e=document.querySelectorAll("[data-tooltip]");e.length&&e.forEach((function(e){return function(e){var t=document.body,n=document.createElement("span");function i(){var t=e.getBoundingClientRect();n.style.top=t.top-(0+n.offsetHeight)+"px",n.style.left=t.left+"px"}n.innerText=e.getAttribute("data-tooltip"),n.setAttribute("class","tooltip"),e.removeAttribute("data-tooltip"),e.addEventListener("mouseenter",(function(){var a=e.getBoundingClientRect();t.appendChild(n),n.style.top=a.top-(0+n.offsetHeight)+"px",n.style.left=a.left+"px",document.addEventListener("scroll",i)})),e.addEventListener("mouseleave",(function(){t.removeChild(n),n.style.top="",n.style.left="",document.removeEventListener("scroll",i)}))}(e)}))}},{key:"updateStateValues",value:function(){this.setState({likedMedia:d.Z.get("user-liked-media"),dislikedMedia:d.Z.get("user-disliked-media")})}},{key:"mediaCategories",value:function(e){if(void 0===this.props.categories||null===this.props.categories||!this.props.categories.length)return null;for(var t=0,n=[];t<this.props.categories.length;)n.push(a.createElement("span",{key:t},a.createElement("a",{href:(0,y.U)(this.props.categories[t].url,s.Z._currentValue.url),title:this.props.categories[t].title},this.props.categories[t].title))),t+=1;return a.createElement("div",{className:"media-under-title-categories"+(e?" over-title":"")},n)}},{key:"render",value:function(){var e=f.Z.get("config-options").pages.media.displayViews&&void 0!==this.props.views,t=d.Z.get("media-data").state,n="";switch(t){case"private":case"restricted":n="The site admins have to make its access public";break;case"unlisted":n="The site admins have to make it appear on listings"}return a.createElement("div",{className:"media-title-banner"},e&&f.Z.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories(!0):null,void 0!==this.props.title?a.createElement("h1",null,this.props.title):null,"public"!==t?a.createElement("div",{className:"media-labels-area"},a.createElement("div",{className:"media-labels-area-inner"},a.createElement("span",{className:"media-label-state"},a.createElement("span",null,t)),a.createElement("span",{className:"helper-icon","data-tooltip":n},a.createElement("i",{className:"material-icons"},"help_outline")))):null,a.createElement("div",{className:"media-views-actions"+(this.state.likedMedia?" liked-media":"")+(this.state.dislikedMedia?" disliked-media":"")},!e&&f.Z.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories():null,a.createElement("span",{className:"author-banner-date"},"Published on ",(0,le.hm)(new Date(this.props.published))),e?a.createElement("div",{className:"media-views"},(0,le.uf)(this.props.views,!0)," ",1>=this.props.views?"view":"views"):null,a.createElement("div",{className:"media-actions"},a.createElement("div",null,F.Z._currentValue.can.likeMedia?a.createElement(qe,null):null,F.Z._currentValue.can.dislikeMedia?a.createElement(Ge,null):null,F.Z._currentValue.can.shareMedia?a.createElement(It,{isVideo:!1}):null,!F.Z._currentValue.is.anonymous&&F.Z._currentValue.can.saveMedia&&-1<Ve._currentValue.mediaTypes.indexOf(d.Z.get("media-type"))?a.createElement(ct,null):null,this.props.allowDownload&&F.Z._currentValue.can.downloadMedia?this.downloadLink?a.createElement(Ye,{link:this.downloadLink,title:this.props.title}):a.createElement(tt,null):null,a.createElement(Vt,{allowDownload:this.props.allowDownload})))))}}])&&Ft(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent);function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yt(e,t){return Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yt(e,t)}function Xt(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kt(e)}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}zt.propTypes={allowDownload:l().bool.isRequired},zt.defaultProps={allowDownload:!1};var Qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jt(i);if(r){var n=Jt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Xt(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={videoLoaded:!1},t.onVideoLoad=t.onVideoLoad.bind(Kt(t)),d.Z.on("loaded_media_data",t.onVideoLoad),t}return t=l,(n=[{key:"onVideoLoad",value:function(){this.setState({videoLoaded:!0})}},{key:"render",value:function(){var e,t,n,i,r,o,l,s=!1;return this.state.videoLoaded&&(s=void 0===(s=d.Z.get("media-data").allow_download)||!!s,e=d.Z.get("media-data").views,t=d.Z.get("media-data").categories_info,n=d.Z.get("media-data").title,i={name:d.Z.get("media-data").author_name,url:d.Z.get("media-data").author_profile,thumb:d.Z.get("media-author-thumbnail-url")},r=d.Z.get("media-data").add_date,o=d.Z.get("media-data").description,l=d.Z.get("media-data").year_produced),this.state.videoLoaded?a.createElement("div",{className:"viewer-info"},a.createElement("div",{className:"viewer-info-inner"},a.createElement(zt,{title:n,views:e,categories:t,allowDownload:s}),a.createElement(Le,{author:i,published:r,description:o,yearProduced:l}))):null}}])&&Gt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent),en=n(2767);function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function an(){var e=d.Z.get("media-data");return e&&e.related_media&&e.related_media.length?e.related_media[0]:null}function rn(e){var t=tn((0,a.useState)(an()),2),n=t[0],i=t[1],r=tn((0,a.useState)(f.Z.get("media-auto-play")),2),o=r[0],l=r[1];function s(){l(f.Z.get("media-auto-play"))}function c(){i(an())}return(0,a.useEffect)((function(){return d.Z.on("loaded_media_data",c),f.Z.on("switched_media_auto_play",s),function(){d.Z.removeListener("loaded_media_data",c),f.Z.removeListener("switched_media_auto_play",s)}}),[]),n?a.createElement("div",{className:"auto-play"},a.createElement("div",{className:"auto-play-header"},a.createElement("div",{className:"next-label"},"Up next"),a.createElement("div",{className:"auto-play-option"},a.createElement("label",{className:"checkbox-label right-selectbox",tabIndex:0,onKeyPress:function(e){0===e.keyCode&&B.p$()}},"AUTOPLAY",a.createElement("span",{className:"checkbox-switcher-wrap"},a.createElement("span",{className:"checkbox-switcher"},a.createElement("input",{type:"checkbox",tabIndex:-1,checked:o,onChange:B.p$})))))),a.createElement(en.s,{className:"items-list-hor",items:[n],pageItems:1,maxItems:1,singleLinkContent:!0,horizontalItemsOrientation:!0,hideDate:!0,hideViews:!f.Z.get("config-media-item").displayViews,hideAuthor:!f.Z.get("config-media-item").displayAuthor})):null}function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function sn(e){var t=on((0,a.useState)(c()),2),n=t[0],i=t[1],r=on((0,a.useState)(null),2),o=r[0],l=r[1];function s(){l(d.Z.get("media-type")),i(c())}function c(){var e=d.Z.get("media-data");return null!=e&&void 0!==e.related_media&&e.related_media.length?e.related_media:null}return(0,a.useEffect)((function(){return d.Z.on("loaded_media_data",s),function(){return d.Z.removeListener("loaded_media_data",s)}}),[]),n&&n.length?a.createElement(en.s,{className:"items-list-hor",items:!e.hideFirst||"video"!==o&&"audio"!==o?n:n.slice(1),pageItems:f.Z.get("config-options").pages.media.related.initialSize,singleLinkContent:!0,horizontalItemsOrientation:!0,hideDate:!0,hideViews:!f.Z.get("config-media-item").displayViews,hideAuthor:!f.Z.get("config-media-item").displayAuthor}):null}function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function un(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dn(e,t){return dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dn(e,t)}function mn(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}sn.propTypes={hideFirst:l().bool},sn.defaultProps={hideFirst:!0};var pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}(o,e);var t,n,i,a,r=(i=o,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fn(i);if(a){var n=fn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return mn(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).data={playlistId:null,enabledLoop:null,enabledShuffle:null,savedPlaylist:!1,response:null},e.browserCache=f.Z.get("browser-cache"),e}return t=o,(n=[{key:"get",value:function(e){switch(e){case"logged-in-user-playlist":return!1;case"enabled-loop":return null===this.data.playlistId&&(this.data.playlistId=d.Z.get("playlist-id"),this.data.enabledLoop=this.browserCache.get("loopPlaylist["+this.data.playlistId+"]"),this.data.enabledLoop=null===this.data.enabledLoop||this.data.enabledLoop),this.data.enabledLoop;case"enabled-shuffle":return null===this.data.playlistId&&(this.data.playlistId=d.Z.get("playlist-id"),this.data.enabledShuffle=this.browserCache.get("shufflePlaylist["+this.data.playlistId+"]"),this.data.enabledShuffle=null!==this.data.enabledShuffle&&this.data.enabledShuffle),this.data.enabledShuffle;case"saved-playlist":return this.data.savedPlaylist}return null}},{key:"actions_handler",value:function(e){switch(e.type){case"TOGGLE_LOOP":null===this.data.playlistId&&(this.data.playlistId=d.Z.get("playlist-id"),this.data.enabledLoop=this.browserCache.get("loopPlaylist["+this.data.playlistId+"]"),this.data.enabledLoop=null===this.data.enabledLoop||this.data.enabledLoop),this.data.enabledLoop=!this.data.enabledLoop,this.browserCache.set("loopPlaylist["+this.data.playlistId+"]",this.data.enabledLoop),this.emit("loop-repeat-updated");break;case"TOGGLE_SHUFFLE":null===this.data.playlistId&&(this.data.playlistId=d.Z.get("playlist-id"),this.data.enabledShuffle=this.browserCache.get("shufflePlaylist["+this.data.playlistId+"]"),this.data.enabledShuffle=null!==this.data.enabledShuffle&&this.data.enabledShuffle),this.data.enabledShuffle=!this.data.enabledShuffle,this.browserCache.set("shufflePlaylist["+this.data.playlistId+"]",this.data.enabledShuffle),this.emit("shuffle-updated");break;case"TOGGLE_SAVE":this.data.savedPlaylist=!this.data.savedPlaylist,this.emit("saved-updated")}}}])&&un(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(re()),hn=(0,le.v$)(new pn,"actions_handler"),yn=n(3386);function vn(e){return a.createElement(en.s,{className:"items-list-hor",pageItems:9999,maxItems:9999,items:e.items,hideDate:!0,hideViews:!0,hidePlaylistOrderNumber:!1,horizontalItemsOrientation:!0,inPlaylistView:!0,singleLinkContent:!0,playlistActiveItem:e.playlistActiveItem})}function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function gn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function En(e,t){return En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},En(e,t)}function _n(e,t){if(t&&("object"===bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wn(e)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}vn.propTypes={items:l().array.isRequired,playlistActiveItem:yn.g},vn.defaultProps={playlistActiveItem:1};var Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kn(i);if(r){var n=kn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _n(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={expanded:!0,loopRepeat:hn.get("enabled-loop"),shuffle:hn.get("enabled-shuffle"),savedPlaylist:hn.get("saved-playlist-loop"),title:e.playlistData.title,link:e.playlistData.url,authorName:e.playlistData.user,authorLink:W.Z._currentValue.home+"/user/"+e.playlistData.user,activeItem:e.activeItem,totalMedia:e.playlistData.media_count,items:e.playlistData.playlist_media},t.onHeaderClick=t.onHeaderClick.bind(wn(t)),t.onLoopClick=t.onLoopClick.bind(wn(t)),t.onShuffleClick=t.onShuffleClick.bind(wn(t)),t.onSaveClick=t.onSaveClick.bind(wn(t)),t.onLoopRepeatUpdate=t.onLoopRepeatUpdate.bind(wn(t)),t.onShuffleUpdate=t.onShuffleUpdate.bind(wn(t)),t.onPlaylistSaveUpdate=t.onPlaylistSaveUpdate.bind(wn(t)),hn.on("loop-repeat-updated",t.onLoopRepeatUpdate),hn.on("shuffle-updated",t.onShuffleUpdate),hn.on("saved-updated",t.onPlaylistSaveUpdate),t}return t=l,(n=[{key:"onHeaderClick",value:function(e){this.setState({expanded:!this.state.expanded})}},{key:"onLoopClick",value:function(){ve().dispatch({type:"TOGGLE_LOOP"})}},{key:"onShuffleClick",value:function(){ve().dispatch({type:"TOGGLE_SHUFFLE"})}},{key:"onSaveClick",value:function(){ve().dispatch({type:"TOGGLE_SAVE"})}},{key:"onShuffleUpdate",value:function(){var e=this;this.setState({shuffle:hn.get("enabled-shuffle")},(function(){e.state.shuffle?B.wN("Playlist shuffle is on","shuffle-on"):B.wN("Playlist shuffle is off","shuffle-off")}))}},{key:"onLoopRepeatUpdate",value:function(){var e=this;this.setState({loopRepeat:hn.get("enabled-loop")},(function(){e.state.loopRepeat?B.wN("Playlist loop is on","loop-on"):B.wN("Playlist loop is off","loop-off")}))}},{key:"onPlaylistSaveUpdate",value:function(){var e=this;this.setState({savedPlaylist:hn.get("saved-playlist")},(function(){e.state.savedPlaylist?B.wN("Added to playlists library","added-to-playlists-lib"):B.wN("Removed from playlists library","removed-from-playlists-lib")}))}},{key:"render",value:function(){return a.createElement("div",{className:"playlist-view-wrap"},a.createElement("div",{className:"playlist-view"+(this.state.expanded?" playlist-expanded-view":"")},a.createElement("div",{className:"playlist-header"},a.createElement("div",{className:"playlist-title"},a.createElement("a",{href:this.state.link,title:this.state.title},this.state.title)),a.createElement("div",{className:"playlist-meta"},a.createElement("span",null,a.createElement("a",{href:this.state.authorLink,title:this.state.authorName},this.state.authorName)),"  -  ",a.createElement("span",{className:"counter"},this.state.activeItem," / ",this.state.totalMedia)),a.createElement(q.M,{className:"toggle-playlist-view",onClick:this.onHeaderClick},this.state.expanded?a.createElement("i",{className:"material-icons"},"keyboard_arrow_up"):a.createElement("i",{className:"material-icons"},"keyboard_arrow_down"))),this.state.expanded?a.createElement("div",{className:"playlist-actions"},a.createElement(q.M,{className:this.state.loopRepeat?"active":"",onClick:this.onLoopClick,title:"Loop playlist"},a.createElement("i",{className:"material-icons"},"repeat"))):null,this.state.expanded&&this.state.items.length?a.createElement("div",{className:"playlist-media"},a.createElement(vn,{items:this.state.items,playlistActiveItem:this.state.activeItem})):null))}}])&&gn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent);function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function On(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nn(e,t){return Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nn(e,t)}function Cn(e,t){if(t&&("object"===Pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rn(e)}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zn(e)}Sn.propTypes={playlistData:l().object.isRequired,activeItem:yn.g},Sn.defaultProps={};var In=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zn(i);if(r){var n=Zn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Cn(this,e)});function l(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e)).state={playlistData:e.playlistData,isPlaylistPage:!!e.playlistData,activeItem:0,mediaType:d.Z.get("media-type")},e.playlistData)for(var n=0;n<e.playlistData.playlist_media.length;){if(e.mediaId===e.playlistData.playlist_media[n].friendly_token){t.state.activeItem=n+1;break}n+=1}return t.onMediaLoad=t.onMediaLoad.bind(Rn(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){d.Z.on("loaded_media_data",this.onMediaLoad)}},{key:"onMediaLoad",value:function(){this.setState({mediaType:d.Z.get("media-type")})}},{key:"render",value:function(){return a.createElement("div",{className:"viewer-sidebar"},this.state.isPlaylistPage?a.createElement(Sn,{activeItem:this.state.activeItem,playlistData:this.props.playlistData}):"video"===this.state.mediaType||"audio"===this.state.mediaType?a.createElement(rn,null):null,a.createElement(sn,{hideFirst:!this.state.isPlaylistPage}))}}])&&On(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent);function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xn(e,t){return xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xn(e,t)}function jn(e,t){if(t&&("object"===Mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}function Ln(e){var t,n,i=e.countries,r=[];if(i.length)for(t=0,n=1<i.length?", ":"";t<i.length;)r[t]=a.createElement("span",{key:t},a.createElement("a",{href:i[t].url,className:"media-country",title:i[t].title},i[t].title),t<i.length-1?n:""),t+=1;return r}var Vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dn(i);if(r){var n=Dn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jn(this,e)});function l(){return An(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=f.Z.get("config-options").pages.media.displayViews&&void 0!==this.props.views,t=d.Z.get("media-data").state,n=d.Z.get("media-countries"),i="";switch(t){case"private":i="The site admins have to make its access public";break;case"unlisted":i="The site admins have to make it appear on listings"}return a.createElement("div",{className:"media-title-banner"},e&&f.Z.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories(!0):null,void 0!==this.props.title?a.createElement("h1",null,this.props.title):null,"public"!==t?a.createElement("div",{className:"media-labels-area"},a.createElement("div",{className:"media-labels-area-inner"},a.createElement("span",{className:"media-label-state"},a.createElement("span",null,t)),a.createElement("span",{className:"helper-icon","data-tooltip":i},a.createElement("i",{className:"material-icons"},"help_outline")))):null,a.createElement("div",{className:"media-views-actions"+(this.state.likedMedia?" liked-media":"")+(this.state.dislikedMedia?" disliked-media":"")},!e&&f.Z.get("config-options").pages.media.categoriesWithTitle?this.mediaCategories():null,a.createElement("div",null,a.createElement("span",{className:"author-banner-date"},"Published on ",(0,le.hm)(new Date(this.props.published))),n.length>0&&a.createElement(a.Fragment,null,a.createElement("span",{className:"dot-divider"},"·")," ",a.createElement(Ln,{countries:n}))),a.createElement("div",{className:"media-actions"},a.createElement("div",{className:"media-actions-container"},e?a.createElement("div",{className:"media-views"},(0,le.uf)(this.props.views,!0)," ",1>=this.props.views?"view":"views"):null,F.Z._currentValue.can.likeMedia?a.createElement(qe,null):null,F.Z._currentValue.can.dislikeMedia?a.createElement(Ge,null):null,F.Z._currentValue.can.shareMedia?a.createElement(It,{isVideo:!0}):null,!F.Z._currentValue.is.anonymous&&F.Z._currentValue.can.saveMedia&&-1<Ve._currentValue.mediaTypes.indexOf(d.Z.get("media-type"))?a.createElement(ct,null):null,this.props.allowDownload&&F.Z._currentValue.can.downloadMedia?this.downloadLink?a.createElement(Ye,{link:this.downloadLink,title:this.props.title}):a.createElement(tt,null):null,a.createElement(Vt,{allowDownload:this.props.allowDownload})))))}}])&&Tn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(zt);function Un(e){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(e)}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hn(e,t){return Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hn(e,t)}function Wn(e,t){if(t&&("object"===Un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qn(e){return qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qn(e)}var zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hn(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qn(i);if(r){var n=qn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wn(this,e)});function l(){return Fn(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e,t,n,i,r,o,l,s=!1;return this.state.videoLoaded&&(s=void 0===(s=d.Z.get("media-data").allow_download)||!!s,e=d.Z.get("media-data").views,t=d.Z.get("media-data").categories_info,n=d.Z.get("media-data").title,i={name:d.Z.get("media-data").author_name,url:d.Z.get("media-data").author_profile,thumb:d.Z.get("media-author-thumbnail-url")},r=d.Z.get("media-data").add_date,o=d.Z.get("media-data").description,l=d.Z.get("media-data").year_produced),this.state.videoLoaded?a.createElement("div",{className:"viewer-info"},a.createElement("div",{className:"viewer-info-inner"},a.createElement(Vn,{title:n,published:r,views:e,categories:t,allowDownload:s}),a.createElement(Le,{author:i,published:r,description:o,yearProduced:l}))):null}}])&&Bn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(Qt);function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function Gn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yn(e,t){return Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yn(e,t)}function Xn(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kn(e)}function Kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yn(e,t)}(l,e);var t,n,i,r,o=(i=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jn(i);if(r){var n=Jn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Xn(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this,e,"media")).state={wideLayout:1216<=f.Z.get("window-inner-width"),mediaLoaded:!1,mediaLoadFailed:!1,isVideoMedia:!1,theaterMode:!1,pagePlaylistLoaded:!1,pagePlaylistData:d.Z.get("playlist-data")},t.onWindowResize=t.onWindowResize.bind(Kn(t)),t.onMediaLoad=t.onMediaLoad.bind(Kn(t)),t.onMediaLoadError=t.onMediaLoadError.bind(Kn(t)),t.onPagePlaylistLoad=t.onPagePlaylistLoad.bind(Kn(t)),d.Z.on("loaded_media_data",t.onMediaLoad),d.Z.on("loaded_media_error",t.onMediaLoadError),d.Z.on("loaded_page_playlist_data",t.onPagePlaylistLoad),t}return t=l,(n=[{key:"componentDidMount",value:function(){M.loadMediaData(),f.Z.on("window_resize",this.onWindowResize)}},{key:"onWindowResize",value:function(){this.setState({wideLayout:1216<=f.Z.get("window-inner-width")})}},{key:"onPagePlaylistLoad",value:function(){this.setState({pagePlaylistLoaded:!0,pagePlaylistData:d.Z.get("playlist-data")})}},{key:"onMediaLoad",value:function(){var e="video"===d.Z.get("media-type");e?(this.onViewerModeChange=this.onViewerModeChange.bind(this),m.Z.on("changed_viewer_mode",this.onViewerModeChange),this.setState({mediaLoaded:!0,isVideoMedia:e,theaterMode:m.Z.get("in-theater-mode")})):this.setState({mediaLoaded:!0,isVideoMedia:e})}},{key:"onViewerModeChange",value:function(){this.setState({theaterMode:m.Z.get("in-theater-mode")})}},{key:"onMediaLoadError",value:function(e){this.setState({mediaLoadFailed:!0})}},{key:"pageContent",value:function(){var e="cf viewer-section"+(this.state.theaterMode?" theater-mode":" viewer-wide"),t="viewer-section-nested"+(this.state.theaterMode?" viewer-section":"");return this.state.mediaLoadFailed?a.createElement("div",{className:e},a.createElement(V,null)):a.createElement("div",{className:e},[a.createElement("div",{className:"viewer-container",key:"viewer-container"},this.state.mediaLoaded&&this.state.pagePlaylistLoaded?this.viewerContainerContent(d.Z.get("media-data")):null),a.createElement("div",{key:"viewer-section-nested",className:t},!this.state.wideLayout||this.state.isVideoMedia&&this.state.theaterMode?[a.createElement(zn,{key:"viewer-info"}),this.state.pagePlaylistLoaded?a.createElement(In,{key:"viewer-sidebar",mediaId:d.Z.get("media-id"),playlistData:d.Z.get("playlist-data")}):null]:[this.state.pagePlaylistLoaded?a.createElement(In,{key:"viewer-sidebar",mediaId:d.Z.get("media-id"),playlistData:d.Z.get("playlist-data")}):null,a.createElement(zn,{key:"viewer-info"})])])}}])&&Gn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(I.T);function ei(e){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(e)}function ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ii(e,t){return ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ii(e,t)}function ai(e,t){if(t&&("object"===ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ri(e){return ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ri(e)}var oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(c,e);var t,n,i,o,l=(i=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ri(i);if(o){var n=ri(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ai(this,e)});function c(){return ti(this,c),l.apply(this,arguments)}return t=c,(n=[{key:"viewerContainerContent",value:function(e){switch(d.Z.get("media-type")){case"video":return a.createElement(s.I,null,(function(t){return a.createElement(r.Z,{data:e,siteUrl:t.url,inEmbed:!1})}));case"audio":return a.createElement(O,null);case"image":return a.createElement(C,null);case"pdf":return a.createElement(R,null)}return a.createElement(Z,null)}}])&&ni(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(Qn);(0,i.X)("page-media",oi)},4860:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}}),n(9751);var i=n(6228);function a(){var e="test-slug";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function r(e,t){return t=parseInt(t,10)||3600,a||console.warn(["Current browser does not support localStorage."]),e?{prefix:e,seconds:t,set:function(n,r,o,l){if(a){(o=o||t)||(l=(0,i.a)(["Invalid cache expiration value",o]));try{localStorage.setItem(e+"["+n+"]",JSON.stringify({value:r,expire:(new Date).getTime()+1e3*o})),l=!0}catch(e){l=(0,i.a)([e])}}return l},get:function(t,n){return null!==(n=(n=a?localStorage.getItem(e+"["+t+"]"):null)?JSON.parse(n):null)?void 0!==n.expire&&n.expire>(new Date).getTime()?n.value:null:n},clear:function(){var t;if(a&&Object.keys(localStorage).length)for(t in localStorage)localStorage.hasOwnProperty(t)&&0===t.indexOf(e)&&localStorage.removeItem(t);return!0}}:(0,i.O)(["Cache object prefix is required"])}},9450:function(e,t,n){"use strict";n(9751),n(6394),n(4669),n(7441);var i=n(2186);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r={},o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r[Object.defineProperty(this,"id",{value:"MediaDurationInfo_"+Object.keys(r).length}).id]={fn:{infoToString:function(e){return e<10?"0"+e:e}}},(0,i.ZU)(t)&&this.update(t)}var t,n;return t=e,(n=[{key:"update",value:function(e){r[this.id].toString=void 0,r[this.id].ariaLabel=void 0,(0,i.ZU)(e)&&(r[this.id].days=Math.floor(e/86400),r[this.id].seconds=e%86400,r[this.id].date=r[this.id].seconds?new Date(1e3*r[this.id].seconds):null,r[this.id].hours=r[this.id].date?24*r[this.id].days+r[this.id].date.getUTCHours():0,r[this.id].minutes=r[this.id].date?r[this.id].date.getUTCMinutes():0,r[this.id].seconds=r[this.id].date?r[this.id].date.getSeconds():0)}},{key:"toString",value:function(){return void 0===r[this.id].toString&&(r[this.id].toString=(0<r[this.id].hours?r[this.id].hours+":":"")+(0<r[this.id].hours&&10>r[this.id].minutes?"0":"")+r[this.id].minutes+":"+r[this.id].fn.infoToString(r[this.id].seconds)),r[this.id].toString}},{key:"ariaLabel",value:function(){if(void 0===r[this.id].ariaLabel){var e=[];0<r[this.id].hours&&e.push(r[this.id].hours+" hours"),0<r[this.id].minutes&&e.push(r[this.id].minutes+" minutes"),0<r[this.id].seconds&&e.push(r[this.id].seconds+" seconds"),r[this.id].ariaLabel=e.join(", ")}return r[this.id].ariaLabel}},{key:"ISO8601",value:function(){return"P0Y0M0DT"+r[this.id].hours+"H"+r[this.id].minutes+"M"+r[this.id].seconds+"S"}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Z=o},8416:function(e,t,n){var i=n(4835).Dispatcher;e.exports=new i},2663:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var i=n(5466),a=n(2123);function r(e){return i.createElement("div",{className:e.className},i.createElement("div",{className:"items-list-wrap items-list-wrap-waiting"},i.createElement(a.i,null)))}},2123:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var i=n(5466),a=n(3074),r=n.n(a);function o(e){var t="spinner-loader";switch(e.size){case"tiny":case"x-small":case"small":case"large":case"x-large":t+=" "+e.size}return i.createElement("div",{className:t},i.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},i.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"1.5",strokeMiterlimit:"10"})))}o.propTypes={size:r().oneOf(["tiny","x-small","small","medium","large","x-large"])},o.defaultProps={size:"medium"}},291:function(e,t,n){"use strict";function i(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function r(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function o(e,t){return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}n.d(t,{Ec:function(){return r},Je:function(){return i},dt:function(){return a},mO:function(){return o}}),n(2322),n(3296),n(7390),n(4669),n(7441),n(9268)},731:function(e,t,n){"use strict";function i(e,t,n){return e.scrollLeft?1+Math.ceil(e.scrollLeft/t):n}function a(e,t){void 0!==e&&(this.data={dom:{wrapper:e,firstItem:e.querySelector(t)},item:{width:null}},this.data.item.width=this.data.dom.firstItem.offsetWidth,this.state={initedAllStateValues:!1,currentSlide:1,maxSlideIndex:null,slideItemsFit:null,slideItems:null,totalItems:null,wrapper:{width:null,scrollWidth:null}})}n.d(t,{Z:function(){return a}}),a.prototype.updateDataStateOnResize=function(e,t){this.data.item.width=this.data.dom.firstItem.offsetWidth,this.state.wrapper.width=this.data.dom.wrapper.offsetWidth,this.state.wrapper.scrollWidth=this.data.dom.wrapper.scrollWidth,this.state.slideItemsFit=Math.floor(this.state.wrapper.width/this.data.item.width),this.state.slideItems=Math.max(1,this.state.slideItemsFit),t&&this.state.slideItems<=this.state.slideItemsFit&&(this.state.itemsLengthFit=this.state.slideItems),this.state.totalItems=e,this.state.maxSlideIndex=Math.max(this.state.totalItems-this.state.slideItemsFit+1),this.state.currentSlide=Math.min(this.state.currentSlide,this.state.maxSlideIndex||1),this.state.currentSlide<=this.state.slideItemsFit&&1<this.state.currentSlide&&(this.state.currentSlide=1)},a.prototype.updateDataState=function(e,t,n){!n&&this.state.initedAllStateValues||(this.state.initedAllStateValues=!0,this.state.wrapper.width=this.data.dom.wrapper.offsetWidth,this.state.wrapper.scrollWidth=this.data.dom.wrapper.scrollWidth,this.state.slideItemsFit=Math.floor(this.state.wrapper.width/this.data.item.width),this.state.slideItems=Math.max(1,this.state.slideItemsFit),t&&this.state.slideItems<=this.state.slideItemsFit&&(this.state.itemsLengthFit=this.state.slideItems)),this.state.totalItems=e,this.state.maxSlideIndex=Math.max(1,this.state.totalItems-this.state.slideItemsFit+1),this.state.currentSlide=Math.min(this.state.currentSlide,this.state.maxSlideIndex),this.state.currentSlide<=this.state.slideItemsFit&&1<this.state.currentSlide&&(this.state.currentSlide=1)},a.prototype.nextSlide=function(){this.state.currentSlide=Math.min(i(this.data.dom.wrapper,this.data.item.width,this.state.currentSlide)+this.state.slideItems,this.state.maxSlideIndex)},a.prototype.previousSlide=function(){this.state.currentSlide=Math.max(1,i(this.data.dom.wrapper,this.data.item.width,this.state.currentSlide)-this.state.slideItems)},a.prototype.scrollToCurrentSlide=function(){this.data.dom.wrapper.scrollLeft=this.data.item.width*(this.state.currentSlide-1)},a.prototype.hasNextSlide=function(){return this.state.currentSlide<this.state.maxSlideIndex},a.prototype.hasPreviousSlide=function(){return 1<this.state.currentSlide},a.prototype.currentSlide=function(){return this.state.currentSlide},a.prototype.loadItemsToFit=function(){return 2*this.state.slideItemsFit>this.state.totalItems},a.prototype.loadMoreItems=function(){return this.state.currentSlide+this.state.slideItemsFit>=this.state.maxSlideIndex},a.prototype.itemsFit=function(){return this.state.slideItemsFit}},1589:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var i=n(5466),a=n(5143),r=i.createContext((0,a.v)(window.MediaCMS).url),o=r.Consumer;t.Z=r},8420:function(e,t,n){"use strict";n.d(t,{$4:function(){return c.Z},$A:function(){return m.Z},A_:function(){return i.Z},GH:function(){return r.Z},Jl:function(){return o.Z},UN:function(){return d.Z},hm:function(){return u.Z},j0:function(){return a.Z},m5:function(){return f.Z},uf:function(){return s.Z},v$:function(){return l.Z},vo:function(){return p.ZP}});var i=n(6638),a=n(9752),r=n(84),o=n(9009),l=n(1438),s=n(4135),c=n(3140),u=(n(1752),n(7514),n(7634)),d=n(4582),m=n(4845),f=(n(1569),n(6203)),p=n(7188)},2186:function(e,t,n){"use strict";function i(e){return e===Math.trunc(e)}function a(e){return function(e,t){return e>0}(e)}function r(e){return i(e)&&a(e)}function o(e){return i(e)&&(a(e)||function(e){return 0===e}(e))}n.d(t,{ZU:function(){return o},aP:function(){return r}}),n(5777)},3699:function(e,t,n){"use strict";n.r(t),n.d(t,{addMediaToPlaylist:function(){return v},addNewPlaylist:function(){return g},copyEmbedMediaCode:function(){return m},copyShareLink:function(){return d},createPlaylist:function(){return y},deleteComment:function(){return h},dislikeMedia:function(){return s},likeMedia:function(){return o},loadMediaData:function(){return r},removeMedia:function(){return f},removeMediaFromPlaylist:function(){return b},reportMedia:function(){return u},submitComment:function(){return p},undislikeMedia:function(){return c},unlikeMedia:function(){return l}}),n(2322),n(3296);var i=n(8416),a=n.n(i);function r(){a().dispatch({type:"LOAD_MEDIA_DATA"})}function o(){a().dispatch({type:"LIKE_MEDIA"})}function l(){a().dispatch({type:"UNLIKE_MEDIA"})}function s(){a().dispatch({type:"DISLIKE_MEDIA"})}function c(){a().dispatch({type:"UNDISLIKE_MEDIA"})}function u(e){a().dispatch({type:"REPORT_MEDIA",reportDescription:e?e.replace(/\s/g,""):""})}function d(e){a().dispatch({type:"COPY_SHARE_LINK",inputElement:e})}function m(e){a().dispatch({type:"COPY_EMBED_MEDIA_CODE",inputElement:e})}function f(){a().dispatch({type:"REMOVE_MEDIA"})}function p(e){a().dispatch({type:"SUBMIT_COMMENT",commentText:e})}function h(e){a().dispatch({type:"DELETE_COMMENT",commentId:e})}function y(e){a().dispatch({type:"CREATE_PLAYLIST",playlist_data:e})}function v(e,t){a().dispatch({type:"ADD_MEDIA_TO_PLAYLIST",playlist_id:e,media_id:t})}function b(e,t){a().dispatch({type:"REMOVE_MEDIA_FROM_PLAYLIST",playlist_id:e,media_id:t})}function g(e){a().dispatch({type:"APPEND_NEW_PLAYLIST",playlist_data:e})}},2276:function(e,t,n){"use strict";n(2322),n(9006),n(9268),n(9751),n(2004),n(8407),n(3296),n(3233),n(5101),n(6394),n(3080),n(8288),n(5677),n(2129),n(4655),n(5466);var i=n(1590),a=n.n(i),r=n(8420),o=(n(4559),n(5143)),l=n(137),s=n.n(l),c=n(4426);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function f(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y={},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(u,e);var t,n,i,a,l=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(i);if(a){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).mediacms_config=(0,o.v)(window.MediaCMS),e._MEDIA=null,e.pagePlaylistId=null,e.pagePlaylistData=null,y[Object.defineProperty(p(e),"id",{value:"MediaPageStoreData_"+Object.keys(y).length}).id]={likedMedia:!1,dislikedMedia:!1,reported_times:0,while:{deleteMedia:!1,submitComment:!1,deleteCommentId:null}},e.removeMediaResponse=e.removeMediaResponse.bind(p(e)),e.removeMediaFail=e.removeMediaFail.bind(p(e)),e.submitCommentFail=e.submitCommentFail.bind(p(e)),e.submitCommentResponse=e.submitCommentResponse.bind(p(e)),e.removeCommentFail=e.removeCommentFail.bind(p(e)),e.removeCommentResponse=e.removeCommentResponse.bind(p(e)),e}return t=u,(n=[{key:"loadData",value:function(){if(!y[this.id].mediaId){var e=((n=new(s())(window.location.href).query)?((n=n.substring(1)).split("&"),n=n.length?n.split("="):[]):n=[],n);if(e.length)for(var t=0;t<e.length;)"m"===e[t]&&(y[this.id].mediaId=e[t+1]),t+=2}var n;if(!y[this.id].mediaId)return console.warn("Invalid media id:",y[this.id].mediaId),!1;var i=null;MediaCMS.provided_password&&(i=MediaCMS.provided_password),this.mediaAPIUrl=this.mediacms_config.api.media+"/"+y[this.id].mediaId,i&&(this.mediaAPIUrl+="?password="+i),this.dataResponse=this.dataResponse.bind(this),this.dataErrorResponse=this.dataErrorResponse.bind(this),(0,r.A_)(this.mediaAPIUrl,!1,this.dataResponse,this.dataErrorResponse)}},{key:"loadPlaylistData",value:function(){var e=this.mediacms_config.api.playlists+"/"+this.pagePlaylistId;this.playlistDataResponse=this.playlistDataResponse.bind(this),this.playlistDataErrorResponse=this.playlistDataErrorResponse.bind(this),(0,r.A_)(e,!1,this.playlistDataResponse,this.playlistDataErrorResponse)}},{key:"playlistDataResponse",value:function(e){if(e&&e.data){for(var t=!1,n=0;n<e.data.playlist_media.length;){if(y[this.id].mediaId===e.data.playlist_media[n].friendly_token){t=!0;break}n+=1}t?this.pagePlaylistData=e.data:this.pagePlaylistId=null,this.emit("loaded_viewer_playlist_data")}else this.pagePlaylistId=null;this.emit("loaded_page_playlist_data")}},{key:"playlistDataErrorResponse",value:function(e){this.emit("loaded_viewer_playlist_error"),this.emit("loaded_page_playlist_data")}},{key:"loadComments",value:function(){this.commentsAPIUrl=this.mediacms_config.api.media+"/"+y[this.id].mediaId+"/comments",this.commentsResponse=this.commentsResponse.bind(this),(0,r.A_)(this.commentsAPIUrl,!1,this.commentsResponse)}},{key:"loadPlaylists",value:function(){this.mediacms_config.member.can.saveMedia&&(this.playlistsAPIUrl=this.mediacms_config.api.user.playlists+this.mediacms_config.member.username,this.playlistsResponse=this.playlistsResponse.bind(this),(0,r.A_)(this.playlistsAPIUrl,!1,this.playlistsResponse))}},{key:"dataResponse",value:function(e){if(e&&e.data){switch(y[this.id].data=e.data,y[this.id].reported_times=!!y[this.id].data.reported_times,this.get("media-type")){case"video":case"audio":case"image":this.emit("loaded_"+this.get("media-type")+"_data")}this.emit("loaded_media_data")}this.loadPlaylists(),this.mediacms_config.member.can.readComment&&this.loadComments()}},{key:"dataErrorResponse",value:function(e){if(void 0!==e.type)switch(e.type){case"network":case"private":case"unavailable":y[this.id].loadErrorType=e.type,y[this.id].loadErrorMessage=void 0!==e.message?e.message:"Αn error occurred while loading the media's data",this.emit("loaded_media_error")}}},{key:"commentsResponse",value:function(e){e&&e.data&&(y[this.id].comments=e.data.count?e.data.results:[],this.emit("comments_load"))}},{key:"playlistsResponse",value:function(e){var t=this;e&&e.data&&function(){var n=e.data.count?e.data.results:[];y[t.id].playlists=[];for(var i=0,a=0;i<n.length;)(function(e){var t,i,o=this;if(n[e].user===this.mediacms_config.member.username){var l=y[o.id].playlists.length;y[o.id].playlists[l]={playlist_id:(t=n[e].url,i=t.split("/"),1<i.length?i[i.length-1]:null),title:n[e].title,description:n[e].description,add_date:n[e].add_date},(0,r.A_)(this.mediacms_config.site.url+"/"+n[e].api_url.replace(/^\//g,""),!1,(function(e){if(e&&e.data){y[o.id].playlists[l].media_list=[];for(var t,i=0;i<e.data.playlist_media.length;)2===(t=e.data.playlist_media[i].url.split("m=")).length&&y[o.id].playlists[l].media_list.push(t[1]),i+=1}(a+=1)===n.length&&this.emit("playlists_load")}))}}).bind(t)(i),i+=1}()}},{key:"requestMediaLike",value:function(){if(!y[this.id].mediaId)return console.warn("Invalid media id:",y[this.id].mediaId),!1;var e=this.mediacms_config.api.media+"/"+y[this.id].mediaId+"/actions";this.likeActionResponse=this.likeActionResponse.bind(this),(0,r.j0)(e,{type:"like"},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.likeActionResponse,function(){this.emit("liked_media_failed_request")}.bind(this))}},{key:"likeActionResponse",value:function(e){e&&(e instanceof Error||e.data&&(y[this.id].likedMedia=!0,this.emit("liked_media")))}},{key:"requestMediaDislike",value:function(){if(!y[this.id].mediaId)return console.warn("Invalid media id:",y[this.id].mediaId),!1;var e=this.mediacms_config.api.media+"/"+y[this.id].mediaId+"/actions";this.dislikeActionResponse=this.dislikeActionResponse.bind(this),(0,r.j0)(e,{type:"dislike"},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.dislikeActionResponse,function(){this.emit("disliked_media_failed_request")}.bind(this))}},{key:"dislikeActionResponse",value:function(e){e&&(e instanceof Error||e.data&&(y[this.id].dislikedMedia=!0,this.emit("disliked_media")))}},{key:"requestMediaReport",value:function(e){if(!y[this.id].mediaId)return console.warn("Invalid media id:",y[this.id].mediaId),!1;var t=this.mediacms_config.api.media+"/"+y[this.id].mediaId+"/actions";this.reportActionResponse=this.reportActionResponse.bind(this),(0,r.j0)(t,{type:"report",extra_info:e},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.reportActionResponse,this.reportActionResponse)}},{key:"reportActionResponse",value:function(e){e&&(e instanceof Error||e.data&&(y[this.id].reported_times+=1,this.emit("reported_media")))}},{key:"set",value:function(e,t){switch(e){case"media-load-error-type":y[this.id].loadErrorType=t;break;case"media-load-error-message":y[this.id].loadErrorMessage=t}}},{key:"get",value:function(e){var t,n,i,a=null;switch(e){case"playlists":a=y[this.id].playlists||[];break;case"media-load-error-type":a=void 0!==y[this.id].loadErrorType?y[this.id].loadErrorType:null;break;case"media-load-error-message":a=void 0!==y[this.id].loadErrorMessage?y[this.id].loadErrorMessage:null;break;case"media-comments":a=y[this.id].comments||[];break;case"media-data":a=y[this.id].data||null;break;case"media-id":a=y[this.id].mediaId;break;case"media-url":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.url?y[this.id].data.url:"N/A";break;case"media-edit-subtitle-url":a=void 0!==y[this.id].data&&"string"==typeof y[this.id].data.add_subtitle_url?y[this.id].data.add_subtitle_url:null;break;case"media-likes":a=(t=y[this.id].likedMedia?1:0)?void 0!==y[this.id].data&&void 0!==y[this.id].data.likes?y[this.id].data.likes+t:t:void 0!==y[this.id].data&&void 0!==y[this.id].data.likes?y[this.id].data.likes:"N/A";break;case"media-dislikes":a=(t=y[this.id].dislikedMedia?1:0)?void 0!==y[this.id].data&&void 0!==y[this.id].data.dislikes?y[this.id].data.dislikes+t:t:void 0!==y[this.id].data&&void 0!==y[this.id].data.dislikes?y[this.id].data.dislikes:"N/A";break;case"media-summary":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.summary?y[this.id].data.summary:null;break;case"media-production-company":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.company&&null!==y[this.id].data.company?y[this.id].data.company.trim():null;break;case"media-website":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.website&&null!==y[this.id].data.website?y[this.id].data.website.trim():null;break;case"display-media-license-info":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.license_info;break;case"media-license-info":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.license_info&&Object.keys(y[this.id].data.license_info).length?y[this.id].data.license_info:null;break;case"media-countries":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.media_country_info?y[this.id].data.media_country_info:[];break;case"media-languages":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.media_language_info?y[this.id].data.media_language_info:[];break;case"media-categories":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.categories_info?y[this.id].data.categories_info:[];break;case"media-topics":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.topics_info?y[this.id].data.topics_info:[];break;case"media-tags":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.tags_info?y[this.id].data.tags_info:[];break;case"media-type":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.media_type?y[this.id].data.media_type:null;break;case"media-original-url":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.original_media_url?y[this.id].data.original_media_url:null;break;case"media-thumbnail-url":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.thumbnail_url?y[this.id].data.thumbnail_url:null;break;case"user-liked-media":a=y[this.id].likedMedia;break;case"user-disliked-media":a=y[this.id].dislikedMedia;break;case"media-author-thumbnail-url":a=void 0!==y[this.id].data&&void 0!==y[this.id].data.author_thumbnail?this.mediacms_config.site.url+"/"+y[this.id].data.author_thumbnail.replace(/^\//g,""):null;break;case"playlist-data":a=this.pagePlaylistData;break;case"playlist-id":a=this.pagePlaylistId;break;case"playlist-next-media-url":if(!this.pagePlaylistData)break;for(n=0,i=0;i<this.pagePlaylistData.playlist_media.length;){if(y[this.id].mediaId===this.pagePlaylistData.playlist_media[i].friendly_token){n=i+1;break}i+=1}n===this.pagePlaylistData.playlist_media.length&&!0===c.Z.get("browser-cache").get("loopPlaylist["+this.pagePlaylistId+"]")&&(n=0),void 0!==this.pagePlaylistData.playlist_media[n]&&(a=this.pagePlaylistData.playlist_media[n].url+"&pl="+this.pagePlaylistId);break;case"playlist-previous-media-url":if(!this.pagePlaylistData)break;for(n=0,i=0;i<this.pagePlaylistData.playlist_media.length;){if(y[this.id].mediaId===this.pagePlaylistData.playlist_media[i].friendly_token){n=i;break}i+=1}0===n?(n=this.pagePlaylistData.playlist_media.length,!0===c.Z.get("browser-cache").get("loopPlaylist["+this.pagePlaylistId+"]")&&(n-=1)):n-=1,void 0!==this.pagePlaylistData.playlist_media[n]&&(a=this.pagePlaylistData.playlist_media[n].url+"&pl="+this.pagePlaylistId)}return a}},{key:"isVideo",value:function(){return"video"===this.get("media-type")}},{key:"onPlaylistCreationCompleted",value:function(e){e&&e.data&&this.emit("playlist_creation_completed",e.data)}},{key:"onPlaylistCreationFailed",value:function(){this.emit("playlist_creation_failed")}},{key:"onPlaylistMediaAdditionCompleted",value:function(e,t){if(t){for(var n=0;n<y[this.id].playlists.length;){if(e===y[this.id].playlists[n].playlist_id){y[this.id].playlists[n].media_list.push(y[this.id].mediaId);break}n+=1}this.emit("media_playlist_addition_completed",e)}}},{key:"onPlaylistMediaAdditionFailed",value:function(e,t){this.emit("media_playlist_addition_failed")}},{key:"onPlaylistMediaRemovalCompleted",value:function(e,t){if(t){for(var n,i,a=0;a<y[this.id].playlists.length;){if(e===y[this.id].playlists[a].playlist_id){for(i=[],n=0;n<y[this.id].playlists[a].media_list.length;)y[this.id].mediaId!==y[this.id].playlists[a].media_list[n]&&i.push(y[this.id].playlists[a].media_list[n]),n+=1;y[this.id].playlists[a].media_list=i;break}a+=1}this.emit("media_playlist_removal_completed",e)}}},{key:"onPlaylistMediaRemovalFailed",value:function(e,t){this.emit("media_playlist_removal_failed")}},{key:"actions_handler",value:function(e){switch(e.type){case"LOAD_MEDIA_DATA":y[this.id].mediaId=window.MediaCMS.mediaId||y[this.id].mediaId,this.pagePlaylistId=function(){var e=null,t=window.location.search;if(""!==t){var n=t.split("?");if(2===n.length){var i;n=n[1].split("&");for(var a=0;a<n.length;){if("pl"===(i=n[a].split("="))[0]){2===i.length&&(e=i[1]);break}a+=1}}}return e}(),this.pagePlaylistId?(this.loadPlaylistData(),this.loadData()):(this.emit("loaded_page_playlist_data"),this.loadData());break;case"UNLIKE_MEDIA":case"UNDISLIKE_MEDIA":break;case"LIKE_MEDIA":y[this.id].likedMedia||y[this.id].dislikedMedia||this.requestMediaLike();break;case"DISLIKE_MEDIA":y[this.id].likedMedia||y[this.id].dislikedMedia||this.requestMediaDislike();break;case"REPORT_MEDIA":y[this.id].reported_times||""!==e.reportDescription&&this.requestMediaReport(e.reportDescription);break;case"COPY_SHARE_LINK":e.inputElement instanceof HTMLElement&&(e.inputElement.select(),document.execCommand("copy"),this.emit("copied_media_link"));break;case"COPY_EMBED_MEDIA_CODE":e.inputElement instanceof HTMLElement&&(e.inputElement.select(),document.execCommand("copy"),this.emit("copied_embed_media_code"));break;case"REMOVE_MEDIA":if(y[this.id].while.deleteMedia)return;y[this.id].while.deleteMedia=!0,(0,r.Jl)(this.mediaAPIUrl,{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.removeMediaResponse,this.removeMediaFail);break;case"SUBMIT_COMMENT":if(y[this.id].while.submitComment)return;y[this.id].while.submitComment=!0,(0,r.j0)(this.commentsAPIUrl,{text:e.commentText},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.submitCommentResponse,this.submitCommentFail);break;case"DELETE_COMMENT":if(null!==y[this.id].while.deleteCommentId)return;y[this.id].while.deleteCommentId=e.commentId,(0,r.Jl)(this.commentsAPIUrl+"/"+e.commentId,{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.removeCommentResponse,this.removeCommentFail);break;case"CREATE_PLAYLIST":(0,r.j0)(this.mediacms_config.api.playlists,{title:e.playlist_data.title,description:e.playlist_data.description},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.onPlaylistCreationCompleted.bind(this),this.onPlaylistCreationFailed.bind(this));break;case"ADD_MEDIA_TO_PLAYLIST":(0,r.GH)(this.mediacms_config.api.playlists+"/"+e.playlist_id,{type:"add",media_friendly_token:e.media_id},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.onPlaylistMediaAdditionCompleted.bind(this,e.playlist_id),this.onPlaylistMediaAdditionFailed.bind(this,e.playlist_id));break;case"REMOVE_MEDIA_FROM_PLAYLIST":(0,r.GH)(this.mediacms_config.api.playlists+"/"+e.playlist_id,{type:"remove",media_friendly_token:e.media_id},{headers:{"X-CSRFToken":(0,r.m5)()}},!1,this.onPlaylistMediaRemovalCompleted.bind(this,e.playlist_id),this.onPlaylistMediaRemovalFailed.bind(this,e.playlist_id));break;case"APPEND_NEW_PLAYLIST":y[this.id].playlists.push(e.playlist_data),this.emit("playlists_load")}}},{key:"removeMediaResponse",value:function(e){e&&204===e.status&&this.emit("media_delete",y[this.id].mediaId)}},{key:"removeMediaFail",value:function(){this.emit("media_delete_fail",y[this.id].mediaId),setTimeout((function(e){y[e.id].while.deleteMedia=null}),100,this)}},{key:"removeCommentFail",value:function(e){this.emit("comment_delete_fail",y[this.id].while.deleteCommentId),setTimeout((function(e){y[e.id].while.deleteCommentId=null}),100,this)}},{key:"removeCommentResponse",value:function(e){if(e&&204===e.status){var t,n=[];for(t in y[this.id].comments)y[this.id].comments.hasOwnProperty(t)&&y[this.id].while.deleteCommentId!==y[this.id].comments[t].uid&&n.push(y[this.id].comments[t]);y[this.id].comments=n,n=null,this.emit("comment_delete",y[this.id].while.deleteCommentId)}setTimeout((function(e){y[e.id].while.deleteCommentId=null}),100,this)}},{key:"submitCommentFail",value:function(e){this.emit("comment_submit_fail"),setTimeout((function(e){y[e.id].while.submitComment=!1}),100,this)}},{key:"submitCommentResponse",value:function(e){e&&201===e.status&&e.data&&Object.keys(e.data)&&(y[this.id].comments.push(e.data),this.emit("comment_submit",e.data.uid)),setTimeout((function(e){y[e.id].while.submitComment=!1}),100,this)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a());t.Z=(0,r.v$)(new v,"actions_handler")},5971:function(e,t,n){"use strict";n.d(t,{CE:function(){return r},X1:function(){return o}});var i=n(8416),a=n.n(i);function r(e){a().dispatch({type:"UPDATE_PLAYLIST",playlist_data:e})}function o(e,t){a().dispatch({type:"MEDIA_REMOVED_FROM_PLAYLIST",media_id:e,playlist_id:t})}},5184:function(e,t,n){"use strict";n.d(t,{T:function(){return w}}),n(5101),n(6394),n(3080),n(2004),n(8407),n(8288),n(5677),n(2129),n(4655);var i=n(5466),a=(n(6116),n(8349));n(288),n(4458),n(3675),n(2322),n(4860),n(365),n(2431);var r=n(6157),o=n(6498);function l(){var e=(0,i.useRef)(null);function t(e){e.preventDefault(),e.stopPropagation(),o.G()}return(0,i.useEffect)((function(){return e.current.addEventListener("click",t),function(){return e.current.removeEventListener("click",t)}}),[]),i.createElement("div",{ref:e,className:"page-sidebar-content-overlay"})}function s(e){return i.createElement("div",{className:"page-main"},e.children||null,r.Z.get("enabled-sidebar")?i.createElement(l,null):null)}n(2070),n(1646);var c=n(4426);function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw a}}return r}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=[];function h(e){var t=d((0,i.useState)(!1),2),n=t[0],a=t[1],r=d((0,i.useState)(!0),2),o=r[0],l=r[1],s=null,c=null;return(0,i.useEffect)((function(){return s=setTimeout((function(){c=setTimeout((function(){l(!1),c=null}),1e3),s=null,a(!0),e.onHide(e.id)}),5e3),function(){s&&clearTimeout(s),c&&clearTimeout(c)}}),[]),o?i.createElement("div",{className:"notification-item"+(n?" hidden":"")},i.createElement("div",null,e.children||null)):null}function y(){var e,t,n,a=d((0,i.useState)(p.length),2),r=a[0],o=a[1];function l(){o(c.Z.get("notifications-size")+p.length)}function s(e){var t=[];p.map((function(n){n[0]!==e&&t.push(n)})),p=t}return(0,i.useEffect)((function(){return l(),c.Z.on("added_notification",l),function(){return c.Z.removeListener("added_notification",l)}}),[]),r?i.createElement("div",{className:"notifications"},i.createElement("div",null,(e=c.Z.get("notifications"),t=p.map((function(e){return i.createElement(h,{key:e[0],id:e[0],onHide:s},e[1])})),n=e.map((function(e){return p.push(e),i.createElement(h,{key:e[0],id:e[0],onHide:s},e[1])})),[].concat(u(t),u(n))))," "):null}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,n,r,o,l=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),n=l.call(this,e),void 0!==t&&a.df(t),n}return t=c,(n=[{key:"render",value:function(){return i.createElement(i.Fragment,null,i.createElement(s,null,this.pageContent()),i.createElement(y,null))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.PureComponent)},8349:function(e,t,n){"use strict";n.d(t,{df:function(){return r},p$:function(){return o},wN:function(){return l}});var i=n(8416),a=n.n(i);function r(e){a().dispatch({type:"INIT_PAGE",page:e})}function o(){a().dispatch({type:"TOGGLE_AUTO_PLAY"})}function l(e,t){a().dispatch({type:"ADD_NOTIFICATION",notification:e,notificationId:t})}}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=function(t,n,a,r){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],r=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=411,function(){var e={411:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],l=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(s)var u=s(i)}for(t&&t(n);c<o.length;c++)r=o[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=i.O(void 0,[431],(function(){return i(162)}));a=i.O(a)}();